# الدروس

## 📘 الدرس 1: مقدمة عن Matplotlib ولماذا نستخدمها؟

### 🔍 ما هي مكتبة Matplotlib؟

مكتبة **Matplotlib** هي واحدة من أقدم وأكثر مكتبات الرسم البياني شيوعًا في لغة **بايثون**. تم تطويرها في عام 2003 بواسطة العالم **جون هونتر (John D. Hunter)**، وكانت هدفها الأساسي هو توفير بيئة رسم تشبه بيئة **MATLAB**، ولكن باستخدام بايثون.

تُستخدم Matplotlib بشكل واسع في مجالات متعددة مثل:
- تحليل البيانات
- علم البيانات
- الذكاء الاصطناعي
- التعلم الآلي
- الهندسة
- الفيزياء
- الاقتصاد
- الإحصاء

وهي المكتبة الأساسية التي تعتمد عليها العديد من المكتبات الأخرى مثل **Seaborn** و **Pandas** في الخلفية عند إنشاء الرسوم البيانية.

### 💡 لماذا نستخدم Matplotlib تحديدًا؟

رغم وجود مكتبات حديثة مثل **Plotly** و **Bokeh**، تظل Matplotlib الخيار الأول للعديد من المحللين والباحثين، ولهذا عدة أسباب:

1. **مدمجة مع البيئة العلمية لبايثون**  
   تعمل بسلاسة مع مكتبات مثل **NumPy** و **Pandas**، مما يجعلها مثالية لتحليل البيانات.

2. **مرنة جدًا**  
   تمنحك تحكمًا دقيقًا في كل عنصر في الرسم: الخطوط، الألوان، المحاور، العناوين، الحجم، الشبكة، وغيرها.

3. **مدعومة على نطاق واسع**  
   تُستخدم في آلاف المشاريع، الأوراق البحثية، والدورات التعليمية.

4. **مجانية ومفتوحة المصدر**  
   لا تحتاج إلى ترخيص أو دفع مقابل استخدامها.

5. **قابلة للنشر العلمي**  
   يمكنك تصدير الرسومات بجودة عالية (مثل PDF، PGF) تناسب النشر في المجلات العلمية.

6. **مناسبة للمبتدئين والمحترفين**  
   تقدم واجهة بسيطة (`pyplot`) للمبتدئين، وواجهة متقدمة (`Object-Oriented`) للمحترفين.

> ✅ **معلومة مهمة**: أكثر من 90% من الرسوم البيانية في الأبحاث التي تُكتب باستخدام بايثون تعتمد على Matplotlib، سواء مباشرة أو من خلال مكتبات أخرى.

---

### 📌 ما الفرق بين `pyplot` و `pylab` و `Axes`؟

عند البدء مع Matplotlib، قد تسمع مصطلحات مثل `pyplot` و `pylab` و `Axes`. دعنا نوضحها:

#### 1. **pyplot**
- هو جزء من Matplotlib.
- يوفر واجهة سهلة تشبه MATLAB.
- نستخدمه غالبًا عبر `import matplotlib.pyplot as plt`.
- مثالي للمبتدئين والتحليل السريع.

```python
import matplotlib.pyplot as plt
plt.plot([1, 2, 3], [4, 5, 6])
plt.show()
```

#### 2. **pylab**
- كان جزءًا قديمًا من Matplotlib.
- يجمع بين `pyplot` و `NumPy` في استيراد واحد.
- **لم يعد موصى به** للاستخدام لأنه يلوث مساحة الأسماء (namespace).
- تجنبه دائمًا.

#### 3. **Axes**
- هو كائن يمثل "منطقة الرسم" الفعلية.
- يحتوي على المحاور، العناوين، الشبكة، والبيانات.
- يستخدم في النمط الكائني (Object-Oriented)، وهو الأفضل للمشاريع الكبيرة.

```python
fig, ax = plt.subplots()
ax.plot([1, 2, 3], [4, 5, 6])
plt.show()
```

---

### 🧩 متى تستخدم `pyplot` ومتى تستخدم `Axes`؟

| الحالة | ما تستخدمه |
|-------|-----------|
| تحليل سريع، رسم بسيط | `pyplot` |
| مشروع كبير، أكثر من رسم | `Axes` (نمط كائني) |
| تحكم دقيق في كل عنصر | `Axes` |
| عرض سريع في ملاحظة Jupyter | `pyplot` |

> ✅ **نصيحة احترافية**: ابدأ بـ `pyplot` لتتعلم، ثم انتقل إلى `Axes` عندما تحتاج إلى تحكم دقيق.

---

### 📊 ما أنواع الرسوم البيانية التي تدعمها Matplotlib؟

تدعم Matplotlib مجموعة واسعة من أنواع الرسوم البيانية، ومن أبرزها:

| النوع | الاستخدام |
|------|----------|
| الرسم الخطي (Line Plot) | عرض الاتجاهات بمرور الوقت |
| رسم الأعمدة (Bar Chart) | مقارنة القيم بين الفئات |
| الرسم الدائري (Pie Chart) | عرض النسب المئوية |
| الرسم التشتتي (Scatter Plot) | دراسة العلاقة بين متغيرين |
| الهيستوغرام (Histogram) | توزيع التكرار للبيانات |
| الرسم الصندوقي (Box Plot) | عرض التوزيع الإحصائي (الوسيط، الربعات) |
| الرسوم ثلاثية الأبعاد | لبيانات ذات أبعاد متعددة |
| الرسوم المتحركة | لعرض التغيرات ديناميكيًا |

---

### 🛠️ كيفية تثبيت Matplotlib

إذا لم تكن مثبتة بعد، استخدم الأمر التالي:

```bash
pip install matplotlib
```

ثم تحقق من التثبيت:

```python
import matplotlib
print(matplotlib.__version__)
```

> ✅ تأكد من أنك تستخدم إصدارًا حديثًا (مثل 3.7 أو أعلى).

---

### 🧪 أول رسم بياني: خطوة بخطوة

#### 📌 الهدف: رسم درجات حرارة على مدار أسبوع

```python
# استيراد المكتبة
import matplotlib.pyplot as plt

# البيانات
أيام = ['الأحد', 'الاثنين', 'الثلاثاء', 'الأربعاء', 'الخميس', 'الجمعة', 'السبت']
درجات = [25, 27, 30, 28, 32, 35, 33]

# رسم الخط
plt.plot(أيام, درجات)

# عرض الرسم
plt.show()
```

🔍 **الشرح**:
- `plt.plot()` يرسم خطًا بين النقاط.
- `plt.show()` يعرض النافذة الرسومية.
- يتم ربط كل يوم بدرجة حرارته تلقائيًا.

> ⚠️ **ملاحظة**: قد تواجه مشكلة في عرض النصوص العربية. سنعالجها لاحقًا.

---

### 🎨 ماذا يمكنني تعديل في هذا الرسم؟

حتى الآن، الرسم بسيط جدًا. لكننا نستطيع تعديل:

- **العنوان**: باستخدام `plt.title()`
- **عنوان المحور السيني**: `plt.xlabel()`
- **عنوان المحور الصادي**: `plt.ylabel()`
- **اللون والنمط**: داخل `plt.plot()`
- **الشبكة**: `plt.grid()`
- **وسيلة الإيضاح**: `plt.legend()`

#### 📌 المثال: تحسين الرسم

```python
plt.plot(أيام, درجات, color='red', linestyle='-', marker='o')
plt.title('درجات الحرارة الأسبوعية')
plt.xlabel('الأيام')
plt.ylabel('الدرجة المئوية (°C)')
plt.grid(True)
plt.show()
```

---

### 📌 الأخطاء الشائعة عند البدء

| الخطأ | السبب | الحل |
|-------|------|------|
| لا يظهر الرسم | نسيت `plt.show()` | أضف `plt.show()` في النهاية |
| النصوص العربية مشوّشة | ترميز الخط | استخدم خطوط داعمة للعربية |
| `NameError: name 'plt' is not defined` | لم تستورد المكتبة | `import matplotlib.pyplot as plt` |
| البيانات لا تظهر | تسلسل البيانات غير متطابق | تأكد من تساوي أطوال القوائم |
| الرسم خارج النطاق | قيم كبيرة جدًا | تحقق من البيانات |

---

### 🧠 لماذا نحتاج إلى رسم البيانات؟

البيانات الخام ليست كافية. الرسم البياني يساعدنا على:

1. **رؤية الاتجاهات**: هل المبيعات تزداد؟
2. **اكتشاف القيم الشاذة**: هل هناك خطأ في البيانات؟
3. **مقارنة الفئات**: أي منتج يباع أكثر؟
4. **فهم العلاقات**: هل هناك ارتباط بين العمر والراتب؟
5. **اتخاذ قرارات**: بناءً على رؤية واضحة.

> ✅ **حقيقة علمية**: الدماغ البشري يعالج الصور أسرع بـ 60,000 مرة من النصوص.

---

### 📚 ملخص الدرس 1

في هذا الدرس، تعلمنا:

- ما هي Matplotlib ولماذا نستخدمها.
- الفرق بين `pyplot` و `Axes`.
- أنواع الرسومات المدعومة.
- كيفية تثبيت المكتبة.
- كيفية إنشاء أول رسم خطي.
- كيفية تخصيص العناوين والمحاور.
- الأخطاء الشائعة وكيفية حلها.
- أهمية الرسم البياني في تحليل البيانات.

---

### ✅ تمارين تطبيقية

1. **التمرين 1**: أنشئ رسمًا خطيًا لدرجات طالب في 5 امتحانات: [85, 90, 78, 92, 88].
2. **التمرين 2**: أضف عنوانًا وعناوين للمحاور.
3. **التمرين 3**: غير لون الخط إلى أزرق ونوع العلامة إلى نجمة `*`.
4. **التمرين 4**: أضف شبكة خفيفة إلى الرسم.
5. **التمرين 5**: جرّب استخدام `plt.plot()` بدون `plt.show()` — ماذا يحدث؟

---

### 📌 نصائح احترافية

- احفظ أكوادك في ملفات `.py` أو ملاحظات Jupyter.
- علّق على كل سطر لتتذكر ماذا يفعل.
- استخدم أسماء متغيرات واضحة.
- جرّب التخصيصات المختلفة لترى تأثيرها.
- ابحث في وثائق Matplotlib عند الحاجة: [https://matplotlib.org](https://matplotlib.org)

---

### ❓ أسئلة مراجعة

1. ما الفرق بين `pyplot` و `Axes`؟
2. لماذا نستخدم `plt.show()`؟
3. ما أنواع الرسوم البيانية التي تدعمها Matplotlib؟
4. كيف تُثبت Matplotlib؟
5. ما أهمية الرسم البياني في تحليل البيانات؟
6. ماذا يحدث إذا نسيت `plt.show()`؟
7. كيف تُظهر الشبكة في الرسم؟
8. ما السبب وراء ظهور النصوص العربية مشوّشة أحيانًا؟
9. ما وظيفة `linestyle` و `marker`؟
10. ما الفائدة من استخدام `color` في `plot()`؟

---

### 🔁 مراجعة سريعة (ملخص الدرس)

- Matplotlib هي مكتبة رسم أساسية في بايثون.
- تُستخدم لتحويل البيانات إلى رسومات بصرية.
- `pyplot` مناسب للمبتدئين، و`Axes` مناسب للمحترفين.
- أول رسم يُنشَأ بـ `plt.plot()` و`plt.show()`.
- يمكن تخصيص العناوين، الألوان، الشبكة، وغيرها.
- الأخطاء الشائعة تشمل نسيان `show()` أو مشاكل في الترميز.
- الرسم البياني يُسهّل فهم البيانات واتخاذ القرارات.

## 📘 الدرس 2: مكونات الرسم: Figure، Axes، Ax، ودور pyplot

### 🔧 ما هي البنية الداخلية لرسم Matplotlib؟

عندما ترسم رسمًا بيانيًا باستخدام مكتبة Matplotlib، فإن ما تراه على الشاشة ليس كائنًا واحدًا، بل **هيكلًا هرميًا من الكائنات**. فهم هذا الهيكل هو المفتاح للتحكم الكامل في كل تفصيلة في الرسم.

تخيل أنك ترسم لوحة فنية. تحتاج إلى:
- **لوحة رسم كبيرة (Figure)**: تمثل النافذة الكاملة.
- **إطار داخلي (Axes)**: المنطقة التي ترسم فيها البيانات فعليًا.
- **أدوات رسم (Ax)**: الكائن الذي تستخدمه للرسم داخل الإطار.
- **قائد الأوركسترا (pyplot)**: ينظم كل شيء بسهولة.

لنفهم كل مكون بدقة.

---

### 🖼️ 1. **Figure (الشكل)**

#### 🔹 التعريف
الـ **Figure** هو الكائن الأعلى في الهرم. يمثل **النافذة الكاملة** التي تظهر عند تشغيل `plt.show()`. يمكن أن تحتوي على رسم واحد أو أكثر (أي أكثر من Axes).

#### 🔹 الوظيفة
- حجز مساحة العرض.
- التحكم في الحجم الكلي للرسم باستخدام `figsize`.
- إمكانية إضافة عناوين عامة للرسم الكامل باستخدام `fig.suptitle()`.

#### 🔹 المثال 1: إنشاء Figure فارغة

```python
import matplotlib.pyplot as plt

# إنشاء Figure فارغة
fig = plt.figure(figsize=(8, 6))  # عرض 8 بوصة، ارتفاع 6 بوصة
fig.suptitle('عنوان عام للرسم', fontsize=16, color='blue')

# عرض النافذة (فارغة)
plt.show()
```

🔍 **الشرح**:
- `figsize=(8, 6)`: يحدد حجم النافذة.
- `suptitle()`: يضيف عنوانًا في الأعلى (فوق كل Axes).
- لا يوجد رسم داخلي بعد، لذا النافذة فارغة.

> ✅ **ملاحظة**: `figure()` لا يُنشئ Axes تلقائيًا. يجب إنشاؤها يدويًا.

---

### 📐 2. **Axes (المحاور)**

#### 🔹 التعريف
الـ **Axes** هو "منطقة الرسم" الفعلية. وهو ما يحتوي على:
- المحور السيني (X-axis)
- المحور الصادي (Y-axis)
- العلامات (Ticks)
- العناوين (Labels)
- البيانات (الخطوط، الأعمدة، إلخ)

يمكن أن تحتوي الـ Figure على أكثر من Axes واحدة (مثل subplots).

#### 🔹 الفرق بين Axes و Axis
- **Axes**: تعني "المنطقة" أو "الإطار" (جمع من Axis).
- **Axis**: تعني محورًا واحدًا (إما X أو Y).

> ✅ تذكر: **Axes ≠ Axis**  
> - Axes: المنطقة الكاملة للرسم.  
> - Axis: جزء من Axes (مثل المحور الأفقي).

---

### 🛠️ 3. **Ax (كائن المحور)**

#### 🔹 التعريف
الـ **Ax** هو كائن يمثل **Axes واحدة**. نستخدمه للتحكم في كل شيء داخل هذه المنطقة.

#### 🔹 لماذا نحتاج إلى Ax؟
لأنه يمنحك تحكمًا دقيقًا، مثل:
- رسم خط: `ax.plot()`
- تعيين عنوان: `ax.set_title()`
- تعيين عناوين المحاور: `ax.set_xlabel()`, `ax.set_ylabel()`
- إضافة شبكة: `ax.grid()`
- تعديل الحدود: `ax.set_xlim()`, `ax.set_ylim()`

---

### 🎻 4. **pyplot (الواجهة البسيطة)**

#### 🔹 التعريف
`pyplot` هو واجهة سهلة توفرها Matplotlib. يتم استيرادها غالبًا كالتالي:

```python
import matplotlib.pyplot as plt
```

#### 🔹 ماذا يفعل pyplot؟
- يدير تلقائيًا إنشاء الـ Figure والـ Axes.
- يوفر أوامر بسيطة مثل:
  - `plt.plot()`
  - `plt.title()`
  - `plt.xlabel()`
  - `plt.show()`

#### 🔹 المثال 2: استخدام pyplot فقط (نمط سهل)

```python
import matplotlib.pyplot as plt

x = [1, 2, 3]
y = [4, 5, 6]

plt.plot(x, y)
plt.title('رسم باستخدام pyplot')
plt.xlabel('X')
plt.ylabel('Y')
plt.show()
```

🔍 **الشرح**:
- `plt.plot()`: يُنشئ Figure وAxes تلقائيًا إذا لم تكن موجودة.
- `plt.title()`: يضيف عنوانًا للـ Axes الحالية.
- هذا النمط ممتاز للمبتدئين، لكنه أقل تحكمًا.

---

### 🔄 الفرق بين نمط pyplot ونمط الكائنات (Object-Oriented)

| الميزة | نمط pyplot (`plt`) | نمط الكائنات (`fig, ax`) |
|--------|---------------------|--------------------------|
| السهولة | عالية | متوسطة إلى صعبة |
| التحكم | محدود | دقيق جدًا |
| الاستخدام | تحليل سريع | مشاريع كبيرة |
| المرونة | منخفضة | عالية |
| الأمثلة | `plt.plot()` | `ax.plot()` |

#### 🔹 المثال 3: نفس الرسم بنمط الكائنات

```python
import matplotlib.pyplot as plt

x = [1, 2, 3]
y = [4, 5, 6]

# إنشاء Figure وAxes يدويًا
fig, ax = plt.subplots(figsize=(8, 5))

# استخدام ax للرسم
ax.plot(x, y)
ax.set_title('رسم باستخدام Axes')
ax.set_xlabel('X')
ax.set_ylabel('Y')
ax.grid(True, alpha=0.3)

plt.show()
```

✅ `fig, ax = plt.subplots()`: ينشئ Figure وأول Axes.
✅ `ax.set_title()`: بدل `plt.title()` — أكثر وضوحًا.
✅ `ax.grid()`: يضيف شبكة خفيفة.

> ✅ **نصيحة**: استخدم نمط الكائنات عندما تحتاج إلى:
> - أكثر من رسم (subplots)
> - تحكم دقيق في الحجم والمحاور
> - كتابة كود قابل لإعادة الاستخدام

---

### 🧩 كيف يتم إنشاء Axes داخليًا؟

عند استخدام `plt.plot()`، يحدث التالي تلقائيًا:
1. تحقق Matplotlib من وجود `Figure` حالية.
2. إذا لم تكن موجودة، تُنشئ واحدة.
3. تحقق من وجود `Axes` حالية.
4. إذا لم تكن موجودة، تُنشئ واحدة.
5. ثم تُرسم البيانات على الـ Axes الحالية.

هذا ما يسمى بـ **الحالة الحالية (Current State)**.

---

### 📌 المثال 4: إنشاء أكثر من Axes في نفس Figure

```python
import matplotlib.pyplot as plt

# إنشاء Figure مع 2 Axes (جانبًا إلى جنب)
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 5))

# البيانات
x = [1, 2, 3, 4]
y1 = [1, 4, 2, 3]
y2 = [2, 3, 1, 4]

# الرسم في المحور الأول
ax1.plot(x, y1, color='blue', marker='o')
ax1.set_title('الرسم الأول')
ax1.set_xlabel('X')
ax1.set_ylabel('Y')

# الرسم في المحور الثاني
ax2.bar(['A', 'B', 'C', 'D'], y2, color='green')
ax2.set_title('الرسم الثاني')
ax2.set_xlabel('الفئات')
ax2.set_ylabel('القيمة')

# منع التداخل
plt.tight_layout()

# عرض النافذة
plt.show()
```

🔍 **الشرح**:
- `subplots(1, 2)`: 1 صف، 2 أعمدة.
- `figsize=(12, 5)`: جعل النافذة واسعة.
- `tight_layout()`: يمنع تداخل العناوين.

> ✅ مثالي لعرض مقارنات أو تحليلات متعددة معًا.

---

### 🧱 كيف تُبنى البنية الهرمية؟

```
Figure
├── Axes 1 (Ax1)
│   ├── X-axis
│   ├── Y-axis
│   ├── Title
│   ├── Labels
│   └── Data (Line, Bar, ...)
├── Axes 2 (Ax2)
│   ├── X-axis
│   ├── Y-axis
│   └── ...
└── Figure Title (suptitle)
```

> ✅ كل عنصر قابل للتعديل منفصل.

---

### 🎨 التحكم في حجم النافذة: `figsize`

يتم التحكم في حجم النافذة بالبوصة (inches) باستخدام `figsize=(العرض, الارتفاع)`.

#### 🔹 المثال 5: حجم صغير مقابل كبير

```python
# حجم صغير
fig, ax = plt.subplots(figsize=(4, 3))
ax.plot([1, 2], [3, 4])
ax.set_title('رسم صغير')
plt.show()

# حجم كبير
fig, ax = plt.subplots(figsize=(10, 8))
ax.plot([1, 2], [3, 4])
ax.set_title('رسم كبير')
plt.show()
```

> ✅ استخدم حجمًا أكبر للعروض التقديمية أو التقارير.

---

### 🖋️ إضافة عنوان عام للنافذة: `suptitle()`

لإضافة عنوان أعلى كل الرسومات:

```python
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 5))
fig.suptitle('تحليل مقارن بين منتجين', fontsize=18, color='darkred')

ax1.plot([1, 2, 3], [4, 5, 6])
ax1.set_title('المنتج أ')

ax2.plot([1, 2, 3], [6, 5, 4])
ax2.set_title('المنتج ب')

plt.tight_layout()
plt.show()
```

✅ `suptitle()` يوضع فوق كل Axes.

---

### 🧩 أنواع إنشاء subplots

| الشكل | الكود |
|------|------|
| 2 صفوف، 1 عمود | `plt.subplots(2, 1)` |
| 2 صفوف، 2 أعمدة | `plt.subplots(2, 2)` |
| 1 صف، 3 أعمدة | `plt.subplots(1, 3)` |

#### 🔹 المثال 6: 2×2 subplots

```python
fig, axs = plt.subplots(2, 2, figsize=(10, 8))

# الوصول إلى كل Axes
axs[0, 0].plot([1, 2], [3, 4])
axs[0, 0].set_title('1')

axs[0, 1].bar(['A', 'B'], [1, 2])
axs[0, 1].set_title('2')

axs[1, 0].scatter([1, 2], [3, 4])
axs[1, 0].set_title('3')

axs[1, 1].pie([1, 2])
axs[1, 1].set_title('4')

plt.tight_layout()
plt.show()
```

✅ `axs` هو مصفوفة ثنائية الأبعاد.

---

### ⚠️ الأخطاء الشائعة عند التعامل مع Figure وAxes

| الخطأ | السبب | الحل |
|------|------|------|
| `AttributeError: 'NoneType' object has no attribute 'plot'` | نسيت تعيين `ax = plt.subplots()` | تأكد من `fig, ax = plt.subplots()` |
| الرسومات تتداخل | لم تستخدم `tight_layout()` | أضف `plt.tight_layout()` قبل `show()` |
| العنوان يختفي | استخدمت `plt.title()` مع `ax` | استخدم `ax.set_title()` |
| لا يظهر شيء | نسيت `plt.show()` | أضف `plt.show()` في النهاية |
| حجم الصورة صغير | لم تحدد `figsize` | استخدم `figsize=(8, 6)` |

---

### 🧠 لماذا نحتاج إلى فهم البنية؟

- **لإنشاء رسومات معقدة**: مثل لوحة تحكم (Dashboard).
- **لتصدير رسومات بجودة عالية**: التحكم في الحجم والدقة.
- **لإعادة استخدام الكود**: كتابة دوال قابلة للإعادة.
- **لتجنب الأخطاء الغامضة**: مثل `SettingWithCopyWarning` في Pandas، لكن في Matplotlib يكون خطأ في التسلسل.

---

### ✅ ملخص الدرس 2

في هذا الدرس، تعلمنا:

- أن الرسم البياني ليس كائنًا واحدًا، بل هيكلًا هرميًا.
- **Figure**: النافذة الكاملة.
- **Axes**: المنطقة التي تُرسم فيها البيانات.
- **Ax**: الكائن الذي نستخدمه للتحكم في Axes.
- **pyplot**: واجهة سهلة للمبتدئين.
- الفرق بين نمط `plt` ونمط `ax`.
- كيفية إنشاء أكثر من رسم في نافذة واحدة (subplots).
- التحكم في الحجم باستخدام `figsize`.
- إضافة عنوان عام باستخدام `suptitle()`.
- الأخطاء الشائعة وكيفية حلها.

---

### ✅ تمارين تطبيقية

1. **التمرين 1**: أنشئ Figure فارغة بحجم (6, 4) وأضف عنوانًا عامًا "تحليل مبيعات".
2. **التمرين 2**: أنشئ رسمين جنبًا إلى جنب: الأول خطي، والثاني أعمدة.
3. **التمرين 3**: استخدم `ax.set_title()` بدل `plt.title()`.
4. **التمرين 4**: جرّب إزالة `tight_layout()` — ماذا يحدث؟
5. **التمرين 5**: أنشئ 4 رسومات في شبكة 2×2، كل واحدة بنوع مختلف.

---

### ❓ أسئلة مراجعة

1. ما الفرق بين Figure وAxes؟
2. ما وظيفة `fig, ax = plt.subplots()`؟
3. لماذا نستخدم `ax.set_title()` بدل `plt.title()`؟
4. ما معنى `figsize=(8, 6)`؟
5. كيف تُنشئ رسمين جنبًا إلى جنب؟
6. ما الفائدة من `tight_layout()`؟
7. ما الفرق بين `Axes` و`Axis`؟
8. ماذا يحدث إذا نسيت `plt.show()`؟
9. كيف تضيف عنوانًا عامًا للنافذة؟
10. لماذا نحتاج إلى نمط الكائنات (Object-Oriented)؟

---

### 🔁 مراجعة سريعة (ملخص الدرس)

- **Figure**: النافذة الكاملة.
- **Axes**: منطقة الرسم الفعلية.
- **Ax**: الكائن الذي نتحكم من خلاله.
- **pyplot**: واجهة سهلة للمبتدئين.
- نمط الكائنات (`ax`) يعطي تحكمًا دقيقًا.
- `subplots()` يُنشئ Figure وAxes.
- `figsize` يتحكم في الحجم.
- `suptitle()` يضيف عنوانًا عامًا.
- `tight_layout()` يمنع التداخل.
- تجنب الأخطاء الشائعة مثل نسيان `show()`.

## 📘 الدرس 3: كيفية إنشاء رسم خطي بسيط — خطوة بخطوة

### ✏️ ما هو الرسم الخطي (Line Plot)؟

الرسم الخطي هو **أبسط أنواع الرسوم البيانية** وأكثرها استخدامًا في تحليل البيانات. يُستخدم لتمثيل العلاقة بين متغيرين، عادةً:
- **المحور السيني (X)**: يمثل المتغير المستقل (مثل الزمن، العمر، أو عدد المنتجات).
- **المحور الصادي (Y)**: يمثل المتغير التابع (مثل السعر، الربح، أو الدرجة).

يُستخدم الرسم الخطي بشكل خاص لعرض **الاتجاهات بمرور الوقت**، مثل:
- تغير درجات الحرارة اليومية.
- نمو المبيعات الشهرية.
- تطور أداء السهم.

---

### 🧩 الخطوة 1: استيراد المكتبة

أول شيء يجب فعله هو استيراد مكتبة Matplotlib. نستخدم الاسم الشائع `plt`:

```python
import matplotlib.pyplot as plt
```

> ✅ **ملاحظة**: تأكد من تثبيت المكتبة أولًا:
> ```bash
> pip install matplotlib
> ```

---

### 🧩 الخطوة 2: إعداد البيانات

نحتاج إلى بيانات نرسمها. لنأخذ مثالًا بسيطًا: **درجات طالب في 5 امتحانات**.

```python
# قائمة بالشهور (أو التواريخ)
الشهور = ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو']

# قائمة بالدرجات
الدرجات = [80, 85, 78, 90, 92]
```

> ✅ تأكد من أن طول القائمتين متساوي. إذا كانت إحداهما أطول، ستحصل على خطأ.

---

### 🧩 الخطوة 3: رسم الخط باستخدام `plot()`

الآن، نستخدم دالة `plot()` لرسم البيانات:

```python
plt.plot(الشهور, الدرجات)
```

🔍 **الشرح**:
- `plt.plot(x, y)`: تأخذ قائمتين — الأولى للمحور X، والثانية للمحور Y.
- تربط النقاط بخط مستقيم.
- تُنشئ تلقائيًا Figure وAxes إذا لم تكن موجودة.

---

### 🧩 الخطوة 4: عرض الرسم باستخدام `show()`

حتى الآن، تم إنشاء الرسم في الذاكرة، لكنه لم يُعرض بعد. نحتاج إلى:

```python
plt.show()
```

✅ `plt.show()` يفتح نافذة جديدة تعرض الرسم.

---

### 📌 المثال الكامل: رسم درجات الطالب

```python
import matplotlib.pyplot as plt

الشهور = ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو']
الدرجات = [80, 85, 78, 90, 92]

plt.plot(الشهور, الدرجات)
plt.show()
```

🎯 **الناتج**: خط يرتفع وينخفض حسب تغير الدرجات.

---

### 🎨 الخطوة 5: إضافة العناوين

الرسم الحالي بسيط جدًا. لنُحسّنه بإضافة:

- **عنوان رئيسي**
- **عنوان للمحور السيني**
- **عنوان للمحور الصادي**

```python
plt.title('تطور درجات الطالب')
plt.xlabel('الشهر')
plt.ylabel('الدرجة')
```

> ✅ هذه الأوامر تُضاف **قبل** `plt.show()`.

---

### 🎨 الخطوة 6: تخصيص مظهر الخط

يمكنك تغيير:
- **اللون**: باستخدام `color`
- **نمط الخط**: باستخدام `linestyle`
- **النقطة (الماركر)**: باستخدام `marker`

#### 🔹 الألوان الشائعة:
- `'red'`, `'blue'`, `'green'`, `'orange'`, `'purple'`

#### 🔹 أنماط الخطوط:
- `'-'`: خط متصل
- `'--'`: خط متقطع
- `':'`: خط منقط
- `'-.'`: خط متقطع-نقطة

#### 🔹 أنواع الماركرات:
- `'o'`: دائرة
- `'s'`: مربع
- `'^'`: مثلث
- `'*'`: نجمة
- `'D'`: معين

#### 📌 المثال: خط أزرق متقطع بنقاط دائرية

```python
plt.plot(الشهور, الدرجات, 
         color='blue', 
         linestyle='--', 
         marker='o')
```

---

### 🧭 الخطوة 7: إضافة الشبكة

الشبكة تساعد على قراءة القيم بدقة:

```python
plt.grid(True)
```

> ✅ يمكنك التحكم في شفافيتها:
> ```python
> plt.grid(True, alpha=0.5)  # شفافية 50%
> ```

---

### 📌 المثال الكامل بعد التخصيص

```python
import matplotlib.pyplot as plt

الشهور = ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو']
الدرجات = [80, 85, 78, 90, 92]

plt.plot(الشهور, الدرجات, 
         color='blue', 
         linestyle='--', 
         marker='o')

plt.title('تطور درجات الطالب', fontsize=16, color='darkblue')
plt.xlabel('الشهر', fontsize=12)
plt.ylabel('الدرجة', fontsize=12)
plt.grid(True, alpha=0.3)

plt.show()
```

---

### 🧠 لماذا نستخدم `fontsize` و `color`؟

- **`fontsize`**: يجعل العناوين واضحة، خاصة في العروض التقديمية.
- **`color`**: يضيف جمالية ويُميّز العناوين عن البيانات.

---

### 🔄 نمط الكائنات (Object-Oriented) للرسم الخطي

رغم أن `pyplot` سهل، فإن النمط الكائني يمنحك تحكمًا أفضل:

```python
fig, ax = plt.subplots()
ax.plot(الشهور, الدرجات, color='green', marker='s')
ax.set_title('درجات الطالب')
ax.set_xlabel('الشهر')
ax.set_ylabel('الدرجة')
ax.grid(True)
plt.show()
```

✅ `ax.set_title()` بدل `plt.title()` — أكثر وضوحًا.
✅ مثالي عندما يكون لديك أكثر من رسم.

---

### ⚠️ الأخطاء الشائعة عند إنشاء رسم خطي

| الخطأ | السبب | الحل |
|------|------|------|
| `ValueError: x and y must have same first dimension` | طول القوائم غير متساوي | تأكد من تساوي أطوال `x` و `y` |
| لا يظهر الرسم | نسيت `plt.show()` | أضف `plt.show()` في النهاية |
| النصوص العربية مشوّشة | ترميز الخط | استخدم خطوط داعمة للعربية |
| `NameError: name 'plt' is not defined` | لم تستورد المكتبة | `import matplotlib.pyplot as plt` |
| الخط متصل لكن بدون علامات | لم تستخدم `marker` | أضف `marker='o'` |

---

### 📌 المثال 2: رسم خطين معًا

لرسم أكثر من خط في نفس الرسم:

```python
الشهور = ['يناير', 'فبراير', 'مارس', 'أبريل']
مبيعات_2023 = [100, 120, 130, 110]
مبيعات_2024 = [110, 125, 140, 150]

plt.plot(الشهور, مبيعات_2023, label='2023')
plt.plot(الشهور, مبيعات_2024, label='2024')

plt.title('مقارنة المبيعات')
plt.xlabel('الشهر')
plt.ylabel('الإجمالي (بالألف)')
plt.legend()  # يعرض وسيلة الإيضاح
plt.grid(True)
plt.show()
```

✅ `label`: يُحدد كل خط.
✅ `plt.legend()`: يعرض وسيلة الإيضاح (Legend).

---

### 🎯 متى نستخدم الرسم الخطي؟

| الحالة | مثال |
|-------|------|
| تحليل زمني | مبيعات شهرية، درجات حرارة يومية |
| مقارنة اتجاهات | مبيعات 2023 مقابل 2024 |
| عرض تطور | نمو عدد المستخدمين |
| دراسة علاقة | هل هناك علاقة بين الدراسة والدرجة؟ |

---

### 🧪 تجربة: ماذا يحدث إذا غيرت `linestyle`؟

جرب هذه الأنواع:
- `'-'`: خط متصل
- `'--'`: متقطع
- `':'`: منقط
- `'-.'`: متقطع-نقطة

```python
plt.plot([1, 2, 3], [4, 5, 6], linestyle='-.')
plt.show()
```

---

### 🧪 تجربة: ماذا يحدث إذا غيرت `marker`؟

جرب:
- `'o'`: دائرة
- `'s'`: مربع
- `'^'`: مثلث
- `'*'`: نجمة

```python
plt.plot([1, 2, 3], [4, 5, 6], marker='*')
plt.show()
```

---

### 📈 نصيحة احترافية: استخدام الاختصارات

يمكنك دمج `color`، `linestyle`، و`marker` في سلسلة واحدة:

```python
plt.plot(x, y, 'ro--')  # red, circle, dashed
```

| الحرف | المعنى |
|------|--------|
| `r` | أحمر |
| `g` | أخضر |
| `b` | أزرق |
| `o` | دائرة |
| `s` | مربع |
| `--` | خط متقطع |
| `:` | منقط |

> ✅ مفيد للرسم السريع.

---

### ✅ ملخص الدرس 3

في هذا الدرس، تعلمنا:

- ما هو الرسم الخطي ولماذا نستخدمه.
- الخطوات الأساسية لإنشاء رسم: استيراد، بيانات، رسم، عرض.
- كيفية إضافة العناوين والمحاور.
- تخصيص مظهر الخط: اللون، النمط، الماركر.
- إضافة الشبكة ووسيلة الإيضاح.
- الفرق بين نمط `pyplot` ونمط الكائنات.
- الأخطاء الشائعة وكيفية حلها.
- رسم أكثر من خط معًا.
- استخدام الاختصارات لتوفير الوقت.

---

### ✅ تمارين تطبيقية

1. **التمرين 1**: أنشئ رسمًا خطيًا لدرجات طالب في 6 امتحانات: [75, 80, 88, 70, 90, 85].
2. **التمرين 2**: غير لون الخط إلى أخضر ونوع العلامة إلى مربع.
3. **التمرين 3**: أضف عنوانًا رئيسيًا وعناوين للمحاور.
4. **التمرين 4**: أضف شبكة خفيفة.
5. **التمرين 5**: جرّب استخدام النمط الكائني (`fig, ax = plt.subplots()`).

---

### ❓ أسئلة مراجعة

1. ما وظيفة `plt.plot()`؟
2. لماذا نستخدم `plt.show()`؟
3. ما الفرق بين `color` و `linestyle` و `marker`؟
4. كيف تُضيف وسيلة إيضاح؟
5. ماذا يحدث إذا كانت قوائم `x` و `y` بأطوال مختلفة؟
6. كيف تُظهر الشبكة في الرسم؟
7. ما معنى `label` في `plot()`؟
8. ما الفرق بين `plt.title()` و `ax.set_title()`؟
9. كيف تُنشئ رسمين معًا في نفس الشكل؟
10. ما الاختصار لخط أحمر متقطع بنقاط دائرية؟

---

### 🔁 مراجعة سريعة (ملخص الدرس)

- الرسم الخطي يُستخدم لعرض الاتجاهات.
- يتطلب استيراد `matplotlib.pyplot as plt`.
- يحتاج إلى قائمتين: واحدة لـ X، وأخرى لـ Y.
- يُرسم بـ `plt.plot(x, y)`.
- يُعرض بـ `plt.show()`.
- يمكن تخصيص العناوين، الألوان، النمط، والماركر.
- الشبكة تُضاف بـ `plt.grid(True)`.
- وسيلة الإيضاح تُضاف بـ `plt.legend()`.
- نمط الكائنات (`ax`) يعطي تحكمًا دقيقًا.
- تجنب الأخطاء الشائعة مثل عدم تساوي الأطوال.

## 📘 الدرس 4: الرسوم الخطية (Line Plots) — التحليل العميق والتطبيقات

### 📈 ما هي الرسوم الخطية؟

الرسم الخطي (Line Plot) هو أحد أبسط وأكثر أنواع الرسوم البيانية شيوعًا في تحليل البيانات. يُستخدم لتمثيل العلاقة بين متغيرين، عادةً ما يكون أحدهما **زمنيًا** (مثل التاريخ، الشهر، السنة)، والآخر **رقميًا** (مثل السعر، المبيعات، الدرجة).

يُبنى الرسم الخطي على فكرة ربط النقاط بخطوط مستقيمة، مما يُظهر **الاتجاهات** و**التغيرات** عبر الزمن أو عبر تسلسل منطقي.

---

### 🧩 لماذا نستخدم الرسوم الخطية؟

الرسم الخطي ليس مجرد خط على الشاشة، بل أداة تحليلية قوية. نستخدمه لأن:

1. **يُظهر الاتجاهات بوضوح**  
   هل المبيعات تزداد؟ هل درجات الحرارة تنخفض؟ الرسم الخطي يُجيب على هذه الأسئلة بسرعة.

2. **يسهل مقارنة أكثر من متغير**  
   يمكن رسم أكثر من خط في نفس الشكل لمقارنة الأداء بين منتجين، أو بين عامين.

3. **مناسب للبيانات الزمنية**  
   مثل مبيعات شهرية، أسعار أسهم يومية، أو عدد زيارات موقع إلكتروني.

4. **بسيط وسهل الفهم**  
   حتى من ليس لديه خلفية تقنية يمكنه فهم الرسم الخطي.

5. **أساس لرسومات متقدمة**  
   يُستخدم كنقطة بداية لتحليلات أكثر تعقيدًا مثل المتوسطات المتحركة.

---

### 📌 المثال 1: مبيعات شهرية

لنأخذ مثالًا واقعيًا: **مبيعات متجر خلال 6 أشهر**.

```python
import matplotlib.pyplot as plt

الشهور = ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو']
المبيعات = [120, 135, 130, 150, 160, 180]

plt.plot(الشهور, المبيعات, color='blue', marker='o', linestyle='-')
plt.title('مبيعات المتجر خلال 6 أشهر')
plt.xlabel('الشهر')
plt.ylabel('الإجمالي (بالألف)')
plt.grid(True, alpha=0.3)
plt.show()
```

🔍 **الشرح**:
- `الشهور`: المحور السيني (X).
- `المبيعات`: المحور الصادي (Y).
- `color='blue'`: لون الخط.
- `marker='o'`: علامات دائرية على كل نقطة.
- `linestyle='-'`: خط متصل.
- `grid(True)`: شبكة خفيفة لتسهيل القراءة.

> ✅ الرسم يُظهر اتجاهًا تصاعديًا، باستثناء تراجع طفيف في مارس.

---

### 🔄 رسم أكثر من خط في نفس الشكل

يمكنك مقارنة أدائك مع العام الماضي:

```python
الشهور = ['يناير', 'فبراير', 'مارس', 'أبريل', 'مايو', 'يونيو']
مبيعات_2023 = [100, 120, 110, 130, 140, 150]
مبيعات_2024 = [120, 135, 130, 150, 160, 180]

plt.plot(الشهور, مبيعات_2023, label='2023', color='gray', linestyle='--')
plt.plot(الشهور, مبيعات_2024, label='2024', color='blue', linestyle='-')

plt.title('مقارنة المبيعات بين 2023 و2024')
plt.xlabel('الشهر')
plt.ylabel('الإجمالي (بالألف)')
plt.legend()  # يعرض وسيلة الإيضاح
plt.grid(True, alpha=0.3)
plt.show()
```

✅ `label`: يُحدد كل خط.
✅ `plt.legend()`: يعرض تسمية لكل خط.
✅ `linestyle='--'`: يُميّز العام الماضي.

---

### 🎨 تخصيص أعمق: الألوان، الأنماط، والماركرات

#### 1. **الألوان (Colors)**

| القيمة | اللون |
|--------|------|
| `'red'` | أحمر |
| `'green'` | أخضر |
| `'blue'` | أزرق |
| `'purple'` | بنفسجي |
| `'orange'` | برتقالي |
| `'black'` | أسود |
| `'gray'` | رمادي |

يمكنك أيضًا استخدام ألوان بالرمز السداسي:
```python
plt.plot(x, y, color='#FF5733')  # لون برتقالي مخصص
```

#### 2. **أنماط الخط (Linestyle)**

| القيمة | الوصف |
|--------|------|
| `'-'` | خط متصل |
| `'--'` | خط متقطع |
| `':'` | خط منقط |
| `'-.'` | خط متقطع-نقطة |

#### 3. **النقطة (Marker)**

| القيمة | الشكل |
|--------|------|
| `'o'` | دائرة |
| `'s'` | مربع |
| `'^'` | مثلث لأعلى |
| `'v'` | مثلث لأسفل |
| `'*'` | نجمة |
| `'D'` | معين |
| `'p'` | خماسي |

---

### 📌 المثال 2: درجات حرارة أسبوعية

```python
أيام = ['الأحد', 'الاثنين', 'الثلاثاء', 'الأربعاء', 'الخميس', 'الجمعة', 'السبت']
درجات_صباح = [22, 24, 26, 25, 28, 30, 29]
درجات_مساء = [18, 20, 22, 21, 24, 26, 25]

plt.plot(أيام, درجات_صباح, label='الصباح', color='orange', marker='o')
plt.plot(أيام, درجات_مساء, label='المساء', color='blue', marker='s')

plt.title('درجات الحرارة اليومية')
plt.xlabel('اليوم')
plt.ylabel('الدرجة المئوية (°C)')
plt.legend()
plt.grid(True, alpha=0.4)
plt.show()
```

✅ يُظهر الفرق بين درجات الصباح والمساء.
✅ استخدام ماركرات مختلفة يسهل التمييز.

---

### 📏 التحكم في المحاور: `xlim` و `ylim`

يمكنك تضييق أو توسيع نطاق العرض:

```python
plt.xlim(0, 5)  # يعرض فقط أول 5 شهور
plt.ylim(100, 200)  # يعرض المبيعات بين 100 و200 ألف
```

> ✅ مفيد عندما تريد التركيز على جزء معين من البيانات.

---

### 📌 المثال 3: استخدام النمط الكائني (Object-Oriented)

رغم أن `pyplot` سهل، فإن النمط الكائني يمنحك تحكمًا أفضل:

```python
fig, ax = plt.subplots(figsize=(10, 6))

ax.plot(الشهور, مبيعات_2024, label='2024', color='blue', marker='o')
ax.set_title('مبيعات 2024')
ax.set_xlabel('الشهر')
ax.set_ylabel('الإجمالي (بالألف)')
ax.legend()
ax.grid(True)

plt.show()
```

✅ `ax.set_title()` بدل `plt.title()` — أكثر وضوحًا.
✅ `figsize=(10, 6)` يجعل الرسم أكبر.

---

### 🧩 متى نستخدم الرسم الخطي؟

| الحالة | مثال |
|-------|------|
| بيانات زمنية | مبيعات شهرية، أسعار أسهم |
| مقارنة اتجاهات | أداء منتجين على مدار الوقت |
| عرض تطور | نمو عدد المستخدمين |
| دراسة علاقة | هل هناك علاقة بين الوقت والكفاءة؟ |

---

### ⚠️ الأخطاء الشائعة عند رسم الخطوط

| الخطأ | السبب | الحل |
|------|------|------|
| `ValueError: x and y must have same first dimension` | طول القوائم غير متساوي | تأكد من تساوي أطوال `x` و `y` |
| لا يظهر الرسم | نسيت `plt.show()` | أضف `plt.show()` في النهاية |
| النصوص العربية مشوّشة | ترميز الخط | استخدم خطوط داعمة للعربية |
| `NameError: name 'plt' is not defined` | لم تستورد المكتبة | `import matplotlib.pyplot as plt` |
| الخط متصل لكن بدون علامات | لم تستخدم `marker` | أضف `marker='o'` |

---

### 🧪 تجربة: ماذا يحدث إذا غيرت `linestyle`؟

جرب هذه الأنواع:
- `'-'`: خط متصل
- `'--'`: متقطع
- `':'`: منقط
- `'-.'`: متقطع-نقطة

```python
plt.plot([1, 2, 3], [4, 5, 6], linestyle='-.')
plt.show()
```

---

### 🧪 تجربة: ماذا يحدث إذا غيرت `marker`؟

جرب:
- `'o'`: دائرة
- `'s'`: مربع
- `'^'`: مثلث
- `'*'`: نجمة

```python
plt.plot([1, 2, 3], [4, 5, 6], marker='*')
plt.show()
```

---

### 📈 نصيحة احترافية: استخدام الاختصارات

يمكنك دمج `color`، `linestyle`، و`marker` في سلسلة واحدة:

```python
plt.plot(x, y, 'ro--')  # red, circle, dashed
```

| الحرف | المعنى |
|------|--------|
| `r` | أحمر |
| `g` | أخضر |
| `b` | أزرق |
| `o` | دائرة |
| `s` | مربع |
| `--` | خط متقطع |
| `:` | منقط |

> ✅ مفيد للرسم السريع.

---

### 📌 المثال 4: رسم خط مع تعبئة المنطقة تحته

لإبراز القيمة التراكمية:

```python
plt.plot(الشهور, المبيعات, color='green')
plt.fill_between(الشهور, المبيعات, color='green', alpha=0.2)
plt.title('المبيعات مع تعبئة المنطقة')
plt.xlabel('الشهر')
plt.ylabel('الإجمالي')
plt.grid(True)
plt.show()
```

✅ `fill_between()`: يملأ المنطقة بين الخط والمحور.
✅ `alpha=0.2`: شفافية خفيفة.

---

### 🧠 لماذا نستخدم `alpha`؟

الـ `alpha` يتحكم في **الشفافية** من 0 (شفاف تمامًا) إلى 1 (معتم تمامًا).

مفيد عندما:
- تتداخل أكثر من منطقة.
- تريد إظهار الخلفية.
- تضيف تعبئة دون إخفاء الخط.

---

### 📌 المثال 5: رسم خط مع خطوط عمودية عند كل نقطة

```python
plt.stem(الشهور, المبيعات, use_line_collection=True)
plt.title('مبيعات بالخطوط العمودية')
plt.xlabel('الشهر')
plt.ylabel('الإجمالي')
plt.show()
```

✅ `plt.stem()`: يُظهر كل نقطة كخط عمودي.
✅ مناسب للبيانات المتقطعة.

---

### ✅ ملخص الدرس 4

في هذا الدرس، تعلمنا:

- ما هو الرسم الخطي ولماذا نستخدمه.
- كيفية رسم خط بسيط لمبيعات أو درجات.
- رسم أكثر من خط معًا لمقارنة الاتجاهات.
- تخصيص الألوان، الأنماط، والماركرات.
- التحكم في المحاور باستخدام `xlim` و `ylim`.
- استخدام النمط الكائني (`fig, ax`) للتحكم الدقيق.
- الأخطاء الشائعة وكيفية حلها.
- استخدام `fill_between()` لتعبئة المنطقة.
- استخدام `plt.stem()` للخطوط العمودية.
- أهمية `alpha` في الشفافية.

---

### ✅ تمارين تطبيقية

1. **التمرين 1**: أنشئ رسمًا خطيًا لدرجات طالب في 8 امتحانات: [70, 75, 80, 85, 82, 90, 88, 92].
2. **التمرين 2**: أضف خطًا ثانيًا لزميله: [65, 70, 72, 78, 80, 85, 83, 87].
3. **التمرين 3**: استخدم ألوانًا مختلفة وأنماط خطوط مختلفة.
4. **التمرين 4**: أضف وسيلة إيضاح وشبكة.
5. **التمرين 5**: جرّب استخدام `fill_between()` لتعبئة المنطقة تحت أحد الخطين.

---

### ❓ أسئلة مراجعة

1. ما وظيفة `plt.plot()`؟
2. لماذا نستخدم `plt.legend()`؟
3. ما الفرق بين `color` و `linestyle` و `marker`؟
4. كيف تُضيف وسيلة إيضاح؟
5. ماذا يحدث إذا كانت قوائم `x` و `y` بأطوال مختلفة؟
6. كيف تُظهر الشبكة في الرسم؟
7. ما معنى `label` في `plot()`؟
8. ما الفرق بين `plt.title()` و `ax.set_title()`؟
9. كيف تُنشئ رسمين معًا في نفس الشكل؟
10. ما الاختصار لخط أحمر متقطع بنقاط دائرية؟

---

### 🔁 مراجعة سريعة (ملخص الدرس)

- الرسم الخطي يُستخدم لعرض الاتجاهات.
- يتطلب استيراد `matplotlib.pyplot as plt`.
- يحتاج إلى قائمتين: واحدة لـ X، وأخرى لـ Y.
- يُرسم بـ `plt.plot(x, y)`.
- يُعرض بـ `plt.show()`.
- يمكن تخصيص العناوين، الألوان، النمط، والماركر.
- الشبكة تُضاف بـ `plt.grid(True)`.
- وسيلة الإيضاح تُضاف بـ `plt.legend()`.
- نمط الكائنات (`ax`) يعطي تحكمًا دقيقًا.
- تجنب الأخطاء الشائعة مثل عدم تساوي الأطوال.

## 📘 الدرس 5: رسوم الأعمدة (Bar Charts) — التحليل العميق والتطبيقات

### 📊 ما هي رسوم الأعمدة؟

رسم الأعمدة (Bar Chart) هو نوع من الرسوم البيانية يُستخدم لعرض **القيم العددية مقابل الفئات**. يتكوّن من أعمدة رأسية (أو أفقية) طولها يتناسب مع القيمة التي تمثلها.

يُستخدم هذا النوع من الرسومات بشكل واسع في:
- عرض المبيعات حسب المنتج.
- مقارنة الرواتب حسب القسم.
- تحليل عدد الطلاب حسب التخصص.
- عرض نتائج الانتخابات حسب المرشح.

---

### 🧩 لماذا نستخدم رسوم الأعمدة؟

1. **سهولة المقارنة**  
   يمكن للعين مقارنة أطوال الأعمدة بسرعة، مما يجعلها مثالية للمقارنة بين الفئات.

2. **واضحة وسهلة الفهم**  
   حتى غير المتخصصين يمكنهم قراءتها بسهولة.

3. **مناسبة للبيانات الفئوية (Categorical)**  
   مثل: أسماء منتجات، أقسام، مدن، ألوان.

4. **قابلة للتخصيص بدرجة عالية**  
   يمكن تغيير الألوان، الحجم، التوجيه، وإضافة قيم على الأعمدة.

---

### 📌 المثال 1: مبيعات الفواكه

لنأخذ مثالًا بسيطًا: **مبيعات متجر للفواكه خلال أسبوع**.

```python
import matplotlib.pyplot as plt

# البيانات
المنتجات = ['تفاح', 'موز', 'برتقال', 'عنب', 'ليمون']
الكمية = [50, 30, 40, 35, 25]

# رسم الأعمدة
plt.bar(المنتجات, الكمية)

# تخصيص
plt.title('مبيعات الفواكه الأسبوعية')
plt.xlabel('المنتج')
plt.ylabel('الكمية المباعة')
plt.grid(True, axis='y', alpha=0.3)  # شبكة على المحور الصادي فقط

# عرض الرسم
plt.show()
```

🔍 **الشرح**:
- `plt.bar(x, y)`: ترسم أعمدة رأسية.
- `grid(True, axis='y')`: يضيف شبكة أفقية فقط (لتسهيل قراءة القيم).
- الأعمدة تُلون تلقائيًا.

> ✅ الرسم يُظهر أن "التفاح" هو الأكثر مبيعًا.

---

### 🔄 رسم الأعمدة الأفقية (Horizontal Bar Chart)

أحيانًا، تكون أسماء الفئات طويلة، لذا نستخدم الأعمدة الأفقية:

```python
plt.barh(المنتجات, الكمية)
plt.title('مبيعات الفواكه (أفقي)')
plt.xlabel('الكمية المباعة')
plt.ylabel('المنتج')
plt.grid(True, axis='x', alpha=0.3)
plt.show()
```

✅ `plt.barh()`: يُنشئ أعمدة أفقية.
✅ مثالي عندما تكون النصوص طويلة.

---

### 🎨 تخصيص ألوان الأعمدة

يمكنك تغيير لون كل عمود:

```python
ألوان = ['red', 'yellow', 'orange', 'purple', 'green']
plt.bar(المنتجات, الكمية, color=ألوان)
plt.title('مبيعات الفواكه بألوان تمثلها')
plt.xlabel('المنتج')
plt.ylabel('الكمية')
plt.show()
```

✅ `color= list`: يُعين لونًا لكل عمود.

> 💡 **نصيحة**: استخدم ألوانًا منطقية (مثل ألوان الفواكه الحقيقية).

---

### 📌 المثال 2: مقارنة مبيعات بين فرعين

لرسم أعمدة متعددة (Grouped Bar Chart):

```python
import numpy as np

المنتجات = ['تفاح', 'موز', 'برتقال', 'عنب']
مبيعات_الفرع_أ = [50, 30, 40, 35]
مبيعات_الفرع_ب = [45, 35, 45, 40]

# تحديد مواقع الأعمدة
x = np.arange(len(المنتجات))
عرض = 0.35

# رسم الأعمدة
plt.bar(x - عرض/2, مبيعات_الفرع_أ, عرض, label='الفرع أ', color='skyblue')
plt.bar(x + عرض/2, مبيعات_الفرع_ب, عرض, label='الفرع ب', color='lightcoral')

# تخصيص
plt.xlabel('المنتج')
plt.ylabel('الكمية')
plt.title('مقارنة مبيعات بين فرعين')
plt.xticks(x, المنتجات)  # تعيين التسميات
plt.legend()
plt.grid(True, axis='y', alpha=0.3)
plt.show()
```

🔍 **الشرح**:
- `np.arange(len(المنتجات))`: يُنشئ مواقع رقمية.
- `x - عرض/2` و `x + عرض/2`: يُزيح الأعمدة لليسار واليمين.
- `plt.xticks()`: يُعيّن التسميات على المحور السيني.

> ✅ مثالي للمقارنات بين مجموعتين.

---

### 📈 رسم الأعمدة المتراكبة (Stacked Bar Chart)

لعرض المجموع الكلي مع تفاصيل كل جزء:

```python
plt.bar(المنتجات, مبيعات_الفرع_أ, label='الفرع أ', color='blue')
plt.bar(المنتجات, مبيعات_الفرع_ب, bottom=مبيعات_الفرع_أ, label='الفرع ب', color='green')

plt.xlabel('المنتج')
plt.ylabel('الكمية')
plt.title('المبيعات الإجمالية (متراكبة)')
plt.legend()
plt.grid(True, axis='y', alpha=0.3)
plt.show()
```

✅ `bottom=مبيعات_الفرع_أ`: يضع الأعمدة فوق بعضها.

> ⚠️ لا يُستخدم إذا كنت تريد مقارنة مباشرة — يُستخدم لعرض المجموع.

---

### 🎯 إضافة القيم على الأعمدة

لجعل الرسم أكثر وضوحًا:

```python
bars = plt.bar(المنتجات, الكمية)

# إضافة النص فوق كل عمود
for bar in bars:
    height = bar.get_height()
    plt.text(bar.get_x() + bar.get_width()/2., height + 1,
             f'{height}',
             ha='center', va='bottom')

plt.title('مبيعات الفواكه مع القيم')
plt.ylabel('الكمية')
plt.show()
```

✅ `bar.get_height()`: يُرجع ارتفاع العمود.
✅ `plt.text()`: يضيف نصًا عند إحداثيات معينة.
✅ `ha='center'`: محاذاة أفقية في المنتصف.

---

### 🧠 لماذا نستخدم `plt.text()`؟

لإظهار القيم الرقمية على الرسم، مما يُسهل القراءة دون الحاجة إلى النظر إلى المحور.

---

### 📌 المثال 3: استخدام النمط الكائني (Object-Oriented)

لتحكم دقيق:

```python
fig, ax = plt.subplots(figsize=(10, 6))

ax.bar(المنتجات, الكمية, color='coral', edgecolor='black', linewidth=1.2)
ax.set_title('مبيعات الفواكه', fontsize=16)
ax.set_xlabel('المنتج')
ax.set_ylabel('الكمية')
ax.grid(True, axis='y', alpha=0.4)

# إضافة القيم
for i, value in enumerate(الكمية):
    ax.text(i, value + 1, str(value), ha='center', va='bottom')

plt.show()
```

✅ `edgecolor='black'`: حدود سوداء حول الأعمدة.
✅ `linewidth=1.2`: سمك الحدود.
✅ `figsize=(10, 6)`: حجم أكبر.

---

### ⚠️ الأخطاء الشائعة عند رسم الأعمدة

| الخطأ | السبب | الحل |
|------|------|------|
| `ValueError: shape mismatch` | أطوال القوائم غير متساوية | تأكد من تساوي أطوال `x` و `y` |
| لا يظهر الرسم | نسيت `plt.show()` | أضف `plt.show()` في النهاية |
| النصوص العربية مشوّشة | ترميز الخط | استخدم خطوط داعمة للعربية |
| `NameError: name 'plt' is not defined` | لم تستورد المكتبة | `import matplotlib.pyplot as plt` |
| الأعمدة متداخلة | عرض كبير جدًا | خفّض قيمة `width` |

---

### 📌 المثال 4: أعمدة بحدود وظلال

لإضافة عمق بصري:

```python
plt.bar(المنتجات, الكمية,
        color='lightblue',
        edgecolor='navy',
        linewidth=2,
        alpha=0.8,
        hatch='//')  # ظلال مائلة

plt.title('أعمدة بألوان وحدود وظلال')
plt.ylabel('الكمية')
plt.grid(True, alpha=0.3)
plt.show()
```

✅ `hatch='//'`: يضيف خطوطًا مائلة (مثل الظل).
✅ `alpha=0.8`: شفافية خفيفة.

---

### 📌 المثال 5: أعمدة بحدود دائرية (محاكاة)

Matplotlib لا يدعم الزوايا المستديرة مباشرة، لكن يمكن محاكاتها باستخدام `Rectangle`:

```python
from matplotlib.patches import Rectangle
import matplotlib.pyplot as plt

fig, ax = plt.subplots()

# رسم كل عمود يدويًا
for i, (product, value) in enumerate(zip(المنتجات, الكمية)):
    # إنشاء مستطيل
    rect = Rectangle((i-0.4, 0), 0.8, value,
                     facecolor='salmon',
                     edgecolor='darkred',
                     linewidth=2,
                     alpha=0.9)
    ax.add_patch(rect)
    # إضافة النص
    ax.text(i, value + 1, str(value), ha='center', va='bottom')

ax.set_xlim(-0.5, len(المنتجات)-0.5)
ax.set_ylim(0, max(الكمية) + 5)
ax.set_xticks(range(len(المنتجات)))
ax.set_xticklabels(المنتجات)
ax.set_ylabel('الكمية')
ax.grid(True, axis='y', alpha=0.3)
plt.title('أعمدة بحدود (محاكاة)')
plt.show()
```

✅ `Rectangle`: كائن يمثل مستطيلًا.
✅ `add_patch()`: يضيف الشكل إلى المحور.

> ✅ مفيد للرسومات الإبداعية.

---

### 📊 متى نستخدم رسوم الأعمدة؟

| الحالة | مثال |
|-------|------|
| مقارنة القيم | مبيعات منتجات مختلفة |
| بيانات فئوية | أسماء، أقسام، مدن |
| تغيرات عبر الزمن (أقل من 10 نقاط) | مبيعات شهرية |
| عرض توزيع | عدد الطلاب حسب التخصص |

---

### 🚫 متى لا نستخدمها؟

- إذا كان عدد الفئات أكثر من 10 — يصبح الرسم فوضويًا.
- إذا كنت تريد عرض الاتجاهات — استخدم الرسم الخطي.
- إذا كنت تريد عرض النسب المئوية — استخدم الرسم الدائري (بشرط ألا يكون أكثر من 5 فئات).

---

### ✅ ملخص الدرس 5

في هذا الدرس، تعلمنا:

- ما هو رسم الأعمدة ولماذا نستخدمه.
- كيفية رسم أعمدة رأسية وأفقية.
- تخصيص الألوان، الحدود، والشفافية.
- رسم أعمدة متعددة (Grouped) ومتراكبة (Stacked).
- إضافة القيم على الأعمدة باستخدام `plt.text()`.
- استخدام النمط الكائني للتحكم الدقيق.
- الأخطاء الشائعة وكيفية حلها.
- إضافة ظلال ومحاكاة الزوايا المستديرة.
- الحالات المناسبة لاستخدام الأعمدة.

---

### ✅ تمارين تطبيقية

1. **التمرين 1**: أنشئ رسم أعمدة لمبيعات 5 منتجات: [100, 80, 120, 90, 110].
2. **التمرين 2**: غير لون الأعمدة إلى ألوان مختلفة.
3. **التمرين 3**: أضف القيم فوق كل عمود.
4. **التمرين 4**: حول الرسم إلى أعمدة أفقية.
5. **التمرين 5**: جرّب رسم عمودين للمقارنة بين عامين.

---

### ❓ أسئلة مراجعة

1. ما وظيفة `plt.bar()`؟
2. ما الفرق بين `plt.bar()` و `plt.barh()`؟
3. كيف تُضيف شبكة على المحور الصادي فقط؟
4. ما معنى `bottom` في `plt.bar()`؟
5. كيف تُخصص لون كل عمود؟
6. ما الفائدة من `plt.text()`؟
7. كيف تُحرك الأعمدة لليمين واليسار في المقارنة؟
8. ما معنى `hatch='//'`؟
9. كيف تُضيف حدودًا سوداء حول الأعمدة؟
10. متى لا نستخدم رسم الأعمدة؟

---

### 🔁 مراجعة سريعة (ملخص الدرس)

- رسم الأعمدة يُستخدم للمقارنة بين الفئات.
- `plt.bar()` يُنشئ أعمدة رأسية.
- `plt.barh()` لأعمدة أفقية.
- يمكن تخصيص الألوان، الحدود، والشفافية.
- `bottom` يُستخدم للرسم المتراكم.
- `plt.text()` يُضيف قيمًا على الأعمدة.
- `width` يتحكم في عرض العمود.
- النمط الكائني يعطي تحكمًا دقيقًا.
- تجنب الأخطاء الشائعة مثل عدم تساوي الأطوال.
- مناسب للبيانات الفئوية.

## 📘 الدرس 6: الرسوم الدائرية (Pie Charts) — التحليل العميق والتطبيقات

### 🥧 ما هي الرسوم الدائرية؟

الرسم الدائري (Pie Chart) هو نوع من الرسوم البيانية يُستخدم لعرض **النسب المئوية** أو **التوزيع النسبي** للفئات ضمن مجموعة واحدة. يتكوّن من دائرة تُقسّم إلى "شرائح" (Slices)، وكل شريحة تمثل فئة، وحجمها يتناسب مع نسبتها من الإجمالي.

يُستخدم هذا النوع من الرسومات بشكل شائع في:
- توزيع المبيعات حسب الفئة.
- نتائج الانتخابات حسب المرشح.
- توزيع الميزانية حسب القسم.
- تحليل عدد العملاء حسب المنطقة.

---

### 🧩 لماذا نستخدم الرسوم الدائرية؟

1. **تُظهر النسب بوضوح**  
   يمكن للعين ملاحظة الفرق بين شريحتين بسرعة، خاصة إذا كانت إحداهما كبيرة جدًا.

2. **مناسبة للبيانات الفئوية (Categorical)**  
   مثل: أسماء، أقسام، مدن، فئات منتجات.

3. **جذابة بصريًا**  
   تُستخدم كثيرًا في العروض التقديمية والتقارير.

4. **بسيطة وسهلة الفهم**  
   حتى غير المتخصصين يمكنهم قراءتها.

---

### 📌 المثال 1: توزيع المبيعات حسب الفئة

لنأخذ مثالًا واقعيًا: **توزيع إجمالي المبيعات على الفئات المختلفة**.

```python
import matplotlib.pyplot as plt

# البيانات
الفئات = ['فواكه', 'خضروات', 'ألبان', 'مخبوزات', 'إلكترونيات']
النسب = [30, 20, 15, 10, 25]

# رسم الرسم الدائري
plt.pie(النسب, labels=الفئات)

# عرض الرسم
plt.show()
```

🔍 **الشرح**:
- `plt.pie(sizes, labels=labels)`: ترسم دائرة مقسّمة إلى شرائح.
- `labels`: تُعيّن تسمية لكل شريحة.

> ✅ الرسم يُظهر أن "الفواكه" و"الإلكترونيات" هما الأكبر.

---

### 🎨 إضافة النسب المئوية: `autopct`

لجعل الرسم أكثر وضوحًا، نُظهر النسبة المئوية لكل شريحة:

```python
plt.pie(النسب, labels=الفئات, autopct='%1.1f%%')
plt.title('توزيع المبيعات حسب الفئة')
plt.show()
```

✅ `autopct='%1.1f%%'`: يعرض النسبة المئوية بدقة منزلة عشرية واحدة.
- `%1.1f`: رقم عشري بـ 1 منزلة.
- `%%`: لإظهار علامة النسبة المئوية (لأن `%` تُستخدم في التنسيق).

---

### 🎨 تخصيص الألوان

يمكنك تعيين ألوان مخصصة لكل شريحة:

```python
ألوان = ['lightcoral', 'yellowgreen', 'gold', 'lightskyblue', 'lightpink']
plt.pie(النسب, labels=الفئات, autopct='%1.1f%%', colors=ألوان)
plt.title('توزيع المبيعات بألوان مخصصة')
plt.show()
```

✅ `colors= list`: يُعيّن لونًا لكل شريحة.

> 💡 **نصيحة**: استخدم ألوانًا متباينة لتسهيل التمييز.

---

### 📌 المثال 2: تفجير شريحة معينة (Explode)

لإبراز شريحة معينة (مثل أكبر فئة):

```python
انفجار = [0.1, 0, 0, 0, 0.1]  # تفجير "الفواكه" و"الإلكترونيات"

plt.pie(النسب, labels=الفئات, autopct='%1.1f%%', 
        colors=ألوان, explode=انفجار)
plt.title('توزيع المبيعات مع تفجير الشرايح')
plt.show()
```

✅ `explode=[0.1, 0, ...]`: يُزيح كل شريحة عن المركز.
- `0.1`: يُبعد الشريحة قليلاً.
- `0`: لا يُحرّك الشريحة.

> ✅ مثالي لجذب الانتباه إلى فئات معينة.

---

### 🔄 الرسم الدائري الثلاثي الأبعاد (3D Pie Chart)

رغم أن Matplotlib لا يدعم الرسوم الدائرية ثلاثية الأبعاد بشكل مباشر، يمكن محاكاتها باستخدام `axes3d`:

```python
from mpl_toolkits.mplot3d import Axes3D

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

ax.pie(النسب, labels=الفئات, autopct='%1.1f%%', 
       colors=ألوان, explode=انفجار)

plt.title('رسم دائري ثلاثي الأبعاد')
plt.show()
```

✅ `projection='3d'`: يُنشئ محورًا ثلاثي الأبعاد.
✅ `ax.pie()`: يعمل مثل `plt.pie()`.

> ⚠️ **تحذير**: الرسوم الدائرية 3D قد تُضلل العين — استخدمها بحذر.

---

### 📌 المثال 3: استخدام النمط الكائني (Object-Oriented)

لتحكم دقيق:

```python
fig, ax = plt.subplots(figsize=(8, 8))

ax.pie(النسب, labels=الفئات, autopct='%1.1f%%',
       colors=ألوان, explode=انفجار, startangle=90)

ax.set_title('توزيع المبيعات (نمط كائني)', fontsize=16, pad=20)
plt.show()
```

✅ `startangle=90`: يبدأ الرسم من الأعلى (90 درجة).
✅ `pad=20`: يُبعد العنوان عن الرسم.
✅ `figsize=(8, 8)`: يجعل الشكل مربعًا لمنع تشويه الدائرة.

> ✅ مثالي للرسومات الاحترافية.

---

### 🧠 لماذا نستخدم `startangle`؟

لتحريك نقطة البداية:
- `startangle=0`: يبدأ من اليمين.
- `startangle=90`: يبدأ من الأعلى (الأكثر شيوعًا).

---

### 📌 المثال 4: رسم دائري بدون وسيلة إيضاح (Legend)

أحيانًا، تكون التسميات مزدحمة، لذا نُظهر وسيلة إيضاح منفصلة:

```python
# لا نضع labels في pie
plt.pie(النسب, autopct='%1.1f%%', colors=ألوان, explode=انفجار)
plt.legend(الفئات, title="الفئات", loc="center left", bbox_to_anchor=(1, 0, 0.5, 1))
plt.title('توزيع المبيعات مع وسيلة إيضاح جانبية')
plt.show()
```

✅ `plt.legend()`: يُعرض التسميات خارج الرسم.
✅ `bbox_to_anchor=(1, 0, 0.5, 1)`: يُضع وسيلة الإيضاح على اليمين.

> ✅ مفيد عندما تكون التسميات طويلة.

---

### 🧪 تجربة: ماذا يحدث إذا كانت النسب لا تساوي 100%؟

```python
النسب = [30, 20, 15]  # المجموع = 65%
plt.pie(النسب, labels=['A', 'B', 'C'], autopct='%1.1f%%')
plt.show()
```

🔍 **النتيجة**: Matplotlib تُعيد حساب النسب تلقائيًا لتكون 100%.

> ✅ لا داعي لحساب النسب يدويًا.

---

### 🚫 متى لا نستخدم الرسوم الدائرية؟

| الحالة | السبب |
|-------|------|
| أكثر من 5 فئات | يصبح الرسم فوضويًا |
| الفئات قريبة جدًا في النسبة | يصعب التمييز |
| تريد مقارنة دقيقة | استخدم رسم أعمدة أفقي |
| تريد عرض التغيرات الزمنية | استخدم رسمًا خطيًا |

> ✅ **قاعدة ذهبية**: لا تستخدم الرسم الدائري إذا كان عدد الفئات > 5.

---

### 📌 المثال 5: دمج مع رسم آخر (_subplot)

لإظهار الرسم الدائري مع رسم خطي:

```python
fig, (ax1, ax2) = plt.subplots(1, 2, figsize=(14, 6))

# الرسم الدائري
ax1.pie(النسب, labels=الفئات, autopct='%1.1f%%', colors=ألوان)
ax1.set_title('توزيع المبيعات')

# الرسم الخطي
شهور = ['يناير', 'فبراير', 'مارس']
مبيعات = [100, 120, 130]
ax2.plot(شهور, مبيعات, marker='o')
ax2.set_title('المبيعات الشهرية')
ax2.grid(True)

plt.tight_layout()
plt.show()
```

✅ `subplots(1, 2)`: رسمان جنبًا إلى جنب.
✅ `tight_layout()`: يمنع التداخل.

---

### ⚠️ الأخطاء الشائعة عند رسم الدوائر

| الخطأ | السبب | الحل |
|------|------|------|
| الدائرة مشوهة | الشكل ليس مربعًا | استخدم `figsize=(8,8)` |
| النصوص العربية مشوّشة | ترميز الخط | استخدم خطوط داعمة للعربية |
| `NameError: name 'plt' is not defined` | لم تستورد المكتبة | `import matplotlib.pyplot as plt` |
| `ValueError: arrays must all be same length` | أطوال `labels` و `sizes` مختلفة | تأكد من التساوي |
| النسب لا تظهر | نسيت `autopct` | أضف `autopct='%1.1f%%'` |

---

### 📊 متى نستخدم الرسوم الدائرية؟

| الحالة | مثال |
|-------|------|
| عرض النسب المئوية | توزيع الميزانية |
| فئات قليلة (3-5) | نتائج الانتخابات |
| فئة واحدة تهيمن | 70% من المبيعات من منتج واحد |
| تقارير إدارية | توزيع العملاء حسب المنطقة |

---

### 📌 المثال 6: تخصيص النصوص والخطوط

لتحكم دقيق في مظهر النص:

```python
wedges, texts, autotexts = plt.pie(
    النسب, 
    labels=الفئات, 
    autopct='%1.1f%%',
    colors=ألوان,
    textprops={'fontsize': 12, 'color': 'black'}
)

# تغيير نص النسب
for autotext in autotexts:
    autotext.set_color('white')
    autotext.set_fontweight('bold')

plt.title('توزيع المبيعات مع تخصيص النصوص', fontsize=16)
plt.show()
```

✅ `textprops`: يُخصّص تسميات الفئات.
✅ `autotexts`: يُخصّص النسب المئوية.

---

### ✅ ملخص الدرس 6

في هذا الدرس، تعلمنا:

- ما هو الرسم الدائري ولماذا نستخدمه.
- كيفية رسم دائرة بسيطة مع تسميات.
- إضافة النسب المئوية باستخدام `autopct`.
- تخصيص الألوان والتفجير (`explode`).
- استخدام النمط الكائني للتحكم الدقيق.
- إظهار وسيلة إيضاح جانبية.
- دمج الرسم الدائري مع رسومات أخرى.
- الحالات التي لا يُنصح باستخدامه فيها.
- الأخطاء الشائعة وكيفية حلها.
- تخصيص النصوص والخطوط.

---

### ✅ تمارين تطبيقية

1. **التمرين 1**: أنشئ رسمًا دائريًا لتوزيع الطلاب حسب التخصص: [40, 30, 20, 10].
2. **التمرين 2**: أضف النسب المئوية وتفجير الشريحة الأكبر.
3. **التمرين 3**: استخدم ألوانًا مخصصة.
4. **التمرين 4**: أظهر وسيلة إيضاح على اليمين.
5. **التمرين 5**: ادمج الرسم الدائري مع رسم خطي يعرض عدد الطلاب شهريًا.

---

### ❓ أسئلة مراجعة

1. ما وظيفة `plt.pie()`؟
2. ما معنى `autopct='%1.1f%%'`؟
3. كيف تُضيف تفجير لشريحة معينة؟
4. ما الفرق بين `labels` و `legend()`؟
5. لماذا نستخدم `figsize=(8,8)` في الرسوم الدائرية؟
6. كيف تُخصص لون النسب المئوية؟
7. ما الفائدة من `startangle`؟
8. متى لا نستخدم الرسم الدائري؟
9. كيف تُظهر وسيلة إيضاح جانبية؟
10. ماذا يحدث إذا كانت النسب لا تساوي 100%؟

---

### 🔁 مراجعة سريعة (ملخص الدرس)

- الرسم الدائري يُستخدم لعرض النسب المئوية.
- `plt.pie(sizes, labels=...)` يُنشئ الرسم.
- `autopct` يُظهر النسب.
- `explode` يُبرز شريحة.
- `colors` يُخصص الألوان.
- `legend()` يُعرض التسميات جانبًا.
- `startangle` يُحرك نقطة البداية.
- النمط الكائني يعطي تحكمًا دقيقًا.
- تجنب استخدامه لأكثر من 5 فئات.
- تأكد من أن الشكل مربع لمنع التشويه.


## 📘 الدرس 7: الرسوم التشتتية (Scatter Plots) — التحليل العميق والتطبيقات

### 🌟 ما هي الرسوم التشتتية؟

الرسم التشتتي (Scatter Plot) هو نوع من الرسوم البيانية يُستخدم لعرض **العلاقة بين متغيرين عدديين**. يُمثل كل نقطة على الرسم قيمة من المتغير الأول (على المحور السيني X) وقيمة من المتغير الثاني (على المحور الصادي Y).

يُستخدم هذا النوع من الرسومات بشكل واسع في:
- دراسة العلاقة بين العمر والراتب.
- تحليل العلاقة بين الوقت والكفاءة.
- اكتشاف القيم الشاذة (Outliers).
- فهم التوزيعات والتجمعات.

---

### 🧩 لماذا نستخدم الرسوم التشتطية؟

1. **تُظهر العلاقة بين متغيرين**  
   هل العلاقة موجبة (كلما زاد X زاد Y)؟ أم سلبية؟ أم لا توجد علاقة؟

2. **تُساعد على اكتشاف الأنماط**  
   مثل التجمعات (Clusters) أو التوزيعات الخطية.

3. **مثالية لاكتشاف القيم الشاذة**  
   النقاط البعيدة عن التجمع الرئيسي تُشير إلى أخطاء أو حالات خاصة.

4. **أساس للتحليل الإحصائي**  
   تُستخدم كخطوة أولى قبل تطبيق الانحدار الخطي أو تحليل الارتباط.

---

### 📌 المثال 1: العلاقة بين العمر والراتب

لنأخذ مثالًا واقعيًا: **علاقة عمر الموظفين برواتبهم**.

```python
import matplotlib.pyplot as plt

# البيانات
الأعمار = [25, 30, 35, 40, 45, 50, 55, 60]
الرواتب = [5000, 6000, 7000, 8000, 9000, 9500, 10000, 10500]

# رسم التشتت
plt.scatter(الأعمار, الرواتب)

# تخصيص
plt.title('العلاقة بين العمر والراتب')
plt.xlabel('العمر (بالسنوات)')
plt.ylabel('الراتب (بالريال)')
plt.grid(True, alpha=0.3)

# عرض الرسم
plt.show()
```

🔍 **الشرح**:
- `plt.scatter(x, y)`: ترسم نقطة لكل زوج (x, y).
- كل نقطة تمثل موظفًا.
- الرسم يُظهر علاقة تصاعدية: كلما زاد العمر، زاد الراتب.

> ✅ هذا يُسمى **ارتباطًا موجبًا**.

---

### 🔄 إضافة لون وحجم متغير ثالث

يمكنك إضافة **بُعد ثالث** إلى الرسم باستخدام:
- **اللون (c)**: لتمثيل فئة (مثل القسم).
- **الحجم (s)**: لتمثيل متغير عددي (مثل سنوات الخبرة).

#### 📌 المثال 2: إضافة قسم العمل كلون

```python
# بيانات إضافية
الأقسام = ['مبيعات', 'مبيعات', 'تقنية', 'تقنية', 'إدارية', 'إدارية', 'تقنية', 'مبيعات']

# رسم التشتت مع تلوين حسب القسم
plt.scatter(الأعمار, الرواتب, c=الأقسام, cmap='Set1')

# تخصيص
plt.title('العمر مقابل الراتب حسب القسم')
plt.xlabel('العمر')
plt.ylabel('الراتب')
plt.colorbar()  # يعرض وسيلة إيضاح للألوان
plt.grid(True, alpha=0.3)
plt.show()
```

✅ `c=الأقسام`: يُلون كل نقطة حسب القسم.
✅ `cmap='Set1'`: يُحدد خريطة ألوان.
✅ `plt.colorbar()`: يُظهر ما يمثله كل لون.

> ✅ مثالي لمقارنة مجموعتين أو أكثر.

---

### 🎨 تخصيص الشكل والشفافية

يمكنك تغيير:
- **شكل النقطة (marker)**: مثل دائرة، مثلث، نجمة.
- **الشفافية (alpha)**: لتجنب التكتل.

#### 📌 المثال 3: تخصيص الشكل والشفافية

```python
plt.scatter(الأعمار, الرواتب,
            marker='^',      # مثلثات
            color='purple',
            alpha=0.7,       # شفافية 70%
            s=100)           # حجم النقطة

plt.title('العمر مقابل الراتب (مثلثات بنفسجية)')
plt.xlabel('العمر')
plt.ylabel('الراتب')
plt.grid(True)
plt.show()
```

✅ `marker='^'`: مثلثات.
✅ `alpha=0.7`: يُقلل من التداخل.
✅ `s=100`: يُكبر النقطة.

---

### 📌 المثال 4: استخدام النمط الكائني (Object-Oriented)

لتحكم دقيق:

```python
fig, ax = plt.subplots(figsize=(10, 6))

ax.scatter(الأعمار, الرواتب, c='blue', s=80, alpha=0.8, edgecolor='darkblue', linewidth=1)
ax.set_title('العمر مقابل الراتب', fontsize=16)
ax.set_xlabel('العمر', fontsize=12)
ax.set_ylabel('الراتب', fontsize=12)
ax.grid(True, alpha=0.4)

plt.show()
```

✅ `edgecolor`: لون الحدود.
✅ `linewidth`: سمك الحدود.
✅ `figsize=(10, 6)`: حجم أكبر.

---

### 🧠 لماذا نستخدم `alpha` في الرسوم التشتطية؟

عندما تكون هناك **كثافة عالية من النقاط**، تصبح الرسمة فوضوية. استخدام `alpha`:
- يُظهر مناطق التجمع بوضوح.
- يُقلل من تأثير التداخل.
- يُبرز القيم الشاذة.

---

### 📌 المثال 5: إضافة خط اتجاه (Trend Line)

لإظهار الاتجاه العام:

```python
import numpy as np

# رسم النقاط
plt.scatter(الأعمار, الرواتب, color='blue', alpha=0.6)

# حساب خط الانحدار الخطي
معاملات = np.polyfit(الأعمار, الرواتب, 1)  # درجة 1 = خط مستقيم
line_x = np.array([25, 60])
line_y = معاملات[0] * line_x + معاملات[1]

# رسم الخط
plt.plot(line_x, line_y, color='red', linestyle='--', label='خط الاتجاه')

# تخصيص
plt.title('العمر مقابل الراتب مع خط اتجاه')
plt.xlabel('العمر')
plt.ylabel('الراتب')
plt.legend()
plt.grid(True, alpha=0.3)
plt.show()
```

✅ `np.polyfit()`: يحسب معاملات الانحدار.
✅ `line_x`, `line_y`: يُنشئ نقاطًا للخط.
✅ `plt.plot()`: يرسم الخط.

> ✅ مفيد للتنبؤ أو فهم الاتجاه العام.

---

### 🚫 ما لا يمكن للرسم التشتتي فعله؟

| الحالة | البديل |
|-------|--------|
| تريد عرض النسب المئوية | الرسم الدائري |
| تريد عرض توزيع تكراري | الهيستوغرام |
| تريد مقارنة قيم فئوية | رسم الأعمدة |
| تريد عرض اتجاه زمني | الرسم الخطي |

---

### 📌 المثال 6: اكتشاف القيم الشاذة (Outliers)

```python
# إضافة قيمة شاذة
الأعمار = [25, 30, 35, 40, 45, 50, 55, 60, 32]
الرواتب = [5000, 6000, 7000, 8000, 9000, 9500, 10000, 10500, 15000]  # موظف عمره 32 وراتبه 15000

plt.scatter(الأعمار, الرواتب)
plt.title('اكتشاف القيمة الشاذة')
plt.xlabel('العمر')
plt.ylabel('الراتب')
plt.annotate('موظف ذو راتب غير معتاد',
             xy=(32, 15000),
             xytext=(40, 13000),
             arrowprops=dict(arrowstyle='->', color='red'))
plt.grid(True)
plt.show()
```

✅ `plt.annotate()`: يُضيف تعليقًا.
✅ `arrowprops`: يُحدد خصائص السهم.

> ✅ يُستخدم في تنظيف البيانات.

---

### 📊 متى نستخدم الرسوم التشتطية؟

| الحالة | مثال |
|-------|------|
| دراسة العلاقة بين متغيرين | العمر والراتب |
| اكتشاف التجمعات | تحليل العملاء حسب الدخل والإنفاق |
| فهم التوزيع | درجات الطلاب في مادتين |
| التحقق من الارتباط | السعر وعدد المبيعات |

---

### ⚠️ الأخطاء الشائعة عند رسم التشتت

| الخطأ | السبب | الحل |
|------|------|------|
| `ValueError: x and y must have same length` | أطوال القوائم مختلفة | تأكد من التساوي |
| لا يظهر الرسم | نسيت `plt.show()` | أضف `plt.show()` |
| النصوص العربية مشوّشة | ترميز الخط | استخدم خطوط داعمة للعربية |
| `NameError: name 'plt' is not defined` | لم تستورد المكتبة | `import matplotlib.pyplot as plt` |
| النقاط متداخلة | `alpha` = 1 | استخدم `alpha=0.5` |

---

### 📌 المثال 7: رسم تشتت مع تعبئة المنطقة

لإبراز منطقة معينة:

```python
plt.scatter(الأعمار, الرواتب, c='green', alpha=0.6)

# تعبئة منطقة العمل المثالي
plt.fill_between([30, 50], 6000, 10000, color='yellow', alpha=0.2, label='النطاق المثالي')

plt.title('العمر مقابل الراتب مع تعبئة')
plt.xlabel('العمر')
plt.ylabel('الراتب')
plt.legend()
plt.grid(True)
plt.show()
```

✅ `fill_between()`: يملأ منطقة مستطيلة.
✅ مفيد للإشارة إلى النطاق المقبول.

---

### ✅ ملخص الدرس 7

في هذا الدرس، تعلمنا:

- ما هو الرسم التشتتي ولماذا نستخدمه.
- كيفية رسم علاقة بين متغيرين عدديين.
- إضافة بُعد ثالث باستخدام اللون والحجم.
- تخصيص الشكل، اللون، الشفافية، والحدود.
- استخدام النمط الكائني للتحكم الدقيق.
- إضافة خط اتجاه باستخدام `np.polyfit()`.
- اكتشاف القيم الشاذة باستخدام `annotate()`.
- تعبئة مناطق معينة للتأكيد.
- الحالات التي لا يُنصح باستخدامه فيها.
- الأخطاء الشائعة وكيفية حلها.

---

### ✅ تمارين تطبيقية

1. **التمرين 1**: أنشئ رسم تشتت لعلاقة الدراسة بالدرجة: دراسة (ساعات) ودرجة (من 100).
2. **التمرين 2**: أضف لونًا يمثل الجنس (مثلاً أحمر للذكور، أزرق للإناث).
3. **التمرين 3**: أضف شفافية لتجنب التداخل.
4. **التمرين 4**: أضف خط اتجاه يُظهر العلاقة.
5. **التمرين 5**: جرّب استخدام `annotate()` لتحديد أعلى درجة.

---

### ❓ أسئلة مراجعة

1. ما وظيفة `plt.scatter()`؟
2. كيف تُضيف لونًا يمثل فئة ثالثة؟
3. ما الفائدة من `cmap`؟
4. لماذا نستخدم `alpha` في الرسوم التشتطية؟
5. كيف تُضيف خط اتجاه؟
6. ما الفرق بين `edgecolor` و `color`؟
7. كيف تُكتشف القيم الشاذة؟
8. ما الفائدة من `plt.colorbar()`؟
9. متى لا نستخدم الرسم التشتتي؟
10. كيف تُخصص شكل النقطة؟

---

### 🔁 مراجعة سريعة (ملخص الدرس)

- الرسم التشتتي يُستخدم لدراسة العلاقة بين متغيرين.
- `plt.scatter(x, y)` يُنشئ الرسم.
- يمكن إضافة بُعد ثالث باللون أو الحجم.
- `alpha` يُقلل من التداخل.
- `cmap` يُحدد خريطة الألوان.
- `plt.colorbar()` يُظهر وسيلة إيضاح الألوان.
- `annotate()` يُضيف تعليقات.
- `np.polyfit()` يحسب خط الاتجاه.
- النمط الكائني يعطي تحكمًا دقيقًا.
- تجنب الأخطاء الشائعة مثل عدم تساوي الأطوال.

## 📘 الدرس 8: الرسوم الصندوقية (Box Plots) — التحليل العميق والتطبيقات

### 📦 ما هي الرسوم الصندوقية؟

الرسم الصندوقي (Box Plot)، ويُعرف أيضًا باسم **مخطط الصندوق والعصفور (Box-and-Whisker Plot)**، هو نوع من الرسوم البيانية يُستخدم لعرض **التوزيع الإحصائي للبيانات**. يُظهر هذا الرسم خمسة مقاييس إحصائية رئيسية:
1. **الحد الأدنى (Minimum)**
2. **الربع الأول (Q1)**
3. **الوسيط (Median)**
4. **الربع الثالث (Q3)**
5. **الحد الأقصى (Maximum)**

بالإضافة إلى ذلك، يُظهر الرسم **القيم الشاذة (Outliers)**، وهي القيم التي تقع خارج النطاق الطبيعي للبيانات.

يُستخدم هذا النوع من الرسومات بشكل واسع في:
- تحليل الجودة.
- مقارنة التوزيعات بين مجموعات مختلفة.
- اكتشاف القيم الشاذة.
- فهم التباين والانحراف في البيانات.

---

### 🧩 لماذا نستخدم الرسوم الصندوقية؟

1. **تُظهر التوزيع الإحصائي بوضوح**  
   لا تعتمد فقط على المتوسط، بل تُظهر كيف تتوزع القيم.

2. **مثالية للمقارنة بين المجموعات**  
   يمكن رسم أكثر من صندوق جنبًا إلى جنب لمقارنة توزيعات مختلفة.

3. **تُبرز القيم الشاذة تلقائيًا**  
   تُظهر النقاط التي تقع خارج النطاق الطبيعي، مما يساعد في تنظيف البيانات.

4. **لا تتأثر بالقيم القصوى**  
   لأنها تعتمد على **الوسيط** وليس المتوسط، فهي أكثر مرونة مع البيانات الشاذة.

5. **مختصرة وفعالة**  
   تُعطي صورة شاملة عن البيانات في مساحة صغيرة.

---

### 📌 المثال 1: توزيع درجات الطلاب

لنأخذ مثالًا واقعيًا: **درجات 30 طالبًا في امتحان رياضيات**.

```python
import matplotlib.pyplot as plt
import numpy as np

# بيانات وهمية لدرجات الطلاب
np.random.seed(42)
الدرجات = np.random.normal(loc=75, scale=10, size=30)  # متوسط 75، انحراف معياري 10
الدرجات = np.round(الدرجات).astype(int)

# إضافة بعض القيم الشاذة
الدرجات = np.append(الدرجات, [40, 95, 35])

# رسم الرسم الصندوقي
plt.boxplot(الدرجات)

# تخصيص
plt.title('توزيع درجات الطلاب في امتحان الرياضيات')
plt.ylabel('الدرجة')
plt.grid(True, axis='y', alpha=0.3)

# عرض الرسم
plt.show()
```

🔍 **الشرح**:
- `np.random.normal()`: يُنشئ بيانات طبيعية التوزيع.
- `np.append()`: يُضيف قيمًا شاذة (مثل 35 و40).
- `plt.boxplot()`: يُنشئ الرسم الصندوقي.

> ✅ الرسم يُظهر أن معظم الدرجات تتراوح بين 65 و85، مع وجود قيم شاذة عند 35 و40.

---

### 🎨 فهم أجزاء الرسم الصندوقي

دعنا نفهم كل جزء من الرسم:

| الجزء | الوصف |
|------|------|
| **الصندوق (Box)** | يمتد من الربع الأول (Q1) إلى الربع الثالث (Q3) |
| **الخط في المنتصف (Median)** | يمثل الوسيط (القيمة الوسطى) |
| **الشعرية العلوية (Upper Whisker)** | تمتد من Q3 إلى الحد الأقصى (ما عدا القيم الشاذة) |
| **الشعرية السفلية (Lower Whisker)** | تمتد من Q1 إلى الحد الأدنى (ما عدا القيم الشاذة) |
| **النقاط (Outliers)** | تمثل القيم التي تقع خارج 1.5 × IQR |

> ✅ **IQR (النطاق الربيعي)** = Q3 - Q1  
> ✅ **القيم الشاذة** = القيم التي تقع خارج [Q1 - 1.5×IQR, Q3 + 1.5×IQR]

---

### 🔄 رسم صندوقي أفقي

أحيانًا، نحتاج إلى عرض الرسم أفقيًا:

```python
plt.boxplot(الدرجات, vert=False)  # vert=False يجعله أفقيًا
plt.title('توزيع الدرجات (أفقي)')
plt.xlabel('الدرجة')
plt.grid(True, axis='x', alpha=0.3)
plt.show()
```

✅ `vert=False`: يُحوّل الرسم إلى أفقي.
✅ مفيد عند وجود نصوص طويلة أو عند دمجه مع رسومات أخرى.

---

### 📌 المثال 2: مقارنة توزيعات بين مجموعات

لرسم أكثر من صندوق في نفس الشكل:

```python
# بيانات لثلاثة صفوف دراسي
الصف_أ = np.random.normal(70, 8, 25)
الصف_ب = np.random.normal(75, 10, 25)
الصف_ج = np.random.normal(80, 6, 25)

# رسم الصناديق الثلاثة
plt.boxplot([الصف_أ, الصف_ب, الصف_ج], labels=['الصف أ', 'الصف ب', 'الصف ج'])

# تخصيص
plt.title('مقارنة توزيع الدرجات بين الصفوف')
plt.ylabel('الدرجة')
plt.grid(True, axis='y', alpha=0.3)
plt.show()
```

🔍 **الشرح**:
- نمرر قائمة من المصفوفات: `[الصف_أ, الصف_ب, الصف_ج]`.
- `labels`: يُعيّن تسمية لكل صندوق.

> ✅ الرسم يُظهر أن "الصف ج" أداءه أفضل، و"الصف ب" لديه تباين أعلى.

---

### 🎨 تخصيص ألوان الصناديق

يمكنك تغيير لون كل صندوق:

```python
data = [الصف_أ, الصف_ب, الصف_ج]
labels = ['الصف أ', 'الصف ب', 'الصف ج']
ألوان = ['lightblue', 'lightgreen', 'lightcoral']

# رسم الصناديق
bplot = plt.boxplot(data, labels=labels, patch_artist=True)  # patch_artist=True لتمكين الألوان

# تخصيص الألوان
for patch, color in zip(bplot['boxes'], ألوان):
    patch.set_facecolor(color)
    patch.set_edgecolor('black')
    patch.set_linewidth(1.5)

# إضافة شفافية للوسيط
for median in bplot['medians']:
    median.set_color('red')
    median.set_linewidth(2)

# تخصيص
plt.title('توزيع الدرجات بألوان مخصصة')
plt.ylabel('الدرجة')
plt.grid(True, axis='y', alpha=0.3)
plt.show()
```

✅ `patch_artist=True`: يسمح بتلوين الصناديق.
✅ `bplot['boxes']`: يُرجع كائنات الصناديق.
✅ `bplot['medians']`: يُرجع خطوط الوسيط.

---

### 📌 المثال 3: استخدام النمط الكائني (Object-Oriented)

لتحكم دقيق:

```python
fig, ax = plt.subplots(figsize=(10, 6))

ax.boxplot([الصف_أ, الصف_ب, الصف_ج], labels=labels, patch_artist=True)

# تخصيص الألوان
boxes = ax.patches[:3]  # أول 3 عناصر هي الصناديق
for box, color in zip(boxes, ألوان):
    box.set_facecolor(color)
    box.set_edgecolor('darkblue')
    box.set_linewidth(1.2)

# تخصيص الوسيط
medians = ax.lines[1::4]  # خطوط الوسيط
for median in medians:
    median.set_color('black')
    median.set_linewidth(2)

# تخصيص
ax.set_title('توزيع الدرجات (نمط كائني)', fontsize=16)
ax.set_ylabel('الدرجة', fontsize=12)
ax.grid(True, axis='y', alpha=0.4)
ax.set_ylim(40, 100)

plt.show()
```

✅ `figsize=(10, 6)`: حجم أكبر.
✅ `ax.set_ylim()`: يُحدد حدود المحور الصادي.
✅ `ax.lines[1::4]`: يُرجع خطوط الوسيط (تقنية متقدمة).

---

### 🧠 لماذا نستخدم `patch_artist=True`؟

لأنه بدونه، لا يمكن تغيير لون الخلفية للصندوق. عند تفعيله، يُعامل الصندوق كـ "شكل ملون" (Patch)، مما يسمح بتخصيص اللون.

---

### 📌 المثال 4: إضافة عناوين فرعية وشبكة

لجعل الرسم أكثر احترافية:

```python
fig, ax = plt.subplots(figsize=(9, 7))

# رسم الصناديق
ax.boxplot(data, labels=labels, patch_artist=True,
           boxprops=dict(facecolor='lightyellow', edgecolor='brown', linewidth=2),
           medianprops=dict(color='red', linewidth=3),
           whiskerprops=dict(linestyle='--', color='gray'),
           capprops=dict(color='gray'))

# تخصيص
ax.set_title('تحليل توزيع الدرجات', fontsize=18, fontweight='bold', pad=20)
ax.set_xlabel('الصف الدراسي', fontsize=14)
ax.set_ylabel('الدرجة', fontsize=14)
ax.grid(True, axis='y', alpha=0.4, linestyle=':', color='gray')

# تحسين مظهر التسميات
ax.tick_params(axis='x', labelsize=12)
ax.tick_params(axis='y', labelsize=12)

plt.show()
```

✅ `boxprops`: خصائص الصندوق.
✅ `medianprops`: خصائص الوسيط.
✅ `whiskerprops`: خصائص الشعرية.
✅ `capprops`: خصائص الأطراف.
✅ `tick_params`: يتحكم في حجم التسميات.

---

### 🚫 متى لا نستخدم الرسوم الصندوقية؟

| الحالة | البديل |
|-------|--------|
| عدد قليل جدًا من البيانات (أقل من 10) | الرسم التشتتي |
| تريد عرض القيم الفعلية | الجدول أو الرسم الخطي |
| تريد عرض النسب المئوية | الرسم الدائري |
| تريد عرض الاتجاهات الزمنية | الرسم الخطي |

> ✅ **قاعدة ذهبية**: استخدم الرسم الصندوقي عندما يكون لديك 10 قيم على الأقل.

---

### ⚠️ الأخطاء الشائعة عند رسم الصناديق

| الخطأ | السبب | الحل |
|------|------|------|
| `ValueError: invalid literal for float()` | بيانات نصية في العمود | تأكد من تحويلها إلى أرقام |
| لا يظهر الرسم | نسيت `plt.show()` | أضف `plt.show()` |
| النصوص العربية مشوّشة | ترميز الخط | استخدم خطوط داعمة للعربية |
| `NameError: name 'plt' is not defined` | لم تستورد المكتبة | `import matplotlib.pyplot as plt` |
| الصناديق متداخلة | عدد كبير من المجموعات | استخدم `figsize` أكبر أو رسم أفقي |

---

### 📌 المثال 5: دمج مع رسم تشتت (Violin Plot مبسط)

رغم أن Violin Plot مدعوم في Seaborn، يمكن محاكاته بسيطًا:

```python
fig, ax = plt.subplots(figsize=(8, 6))

# رسم الصندوق
ax.boxplot(الصف_أ, positions=[1], widths=0.6, patch_artist=True,
           boxprops=dict(facecolor='lightblue', alpha=0.6))

# إضافة تشتت للبيانات (لإظهار الكثافة)
y = الدرجة_أ
x = np.random.normal(1, 0.05, size=len(y))  # توزيع أفقي بسيط
ax.scatter(x, y, alpha=0.6, color='blue', s=20)

# تخصيص
ax.set_xlim(0.5, 1.5)
ax.set_title('مزيج صندوقي وتشتتي (لإظهار الكثافة)')
ax.set_ylabel('الدرجة')
ax.set_xticks([1])
ax.set_xticklabels(['الصف أ'])
ax.grid(True, axis='y', alpha=0.3)

plt.show()
```

✅ `positions=[1]`: يحدد موقع الصندوق أفقيًا.
✅ `np.random.normal(1, 0.05)`: يُوزع النقاط حول الموضع 1.
✅ يُظهر توزيع البيانات بشكل بصري.

---

### 📊 متى نستخدم الرسوم الصندوقية؟

| الحالة | مثال |
|-------|------|
| مقارنة توزيعات | مبيعات بين فروع مختلفة |
| اكتشاف القيم الشاذة | درجات، رواتب، أوزان |
| تحليل الجودة | قياسات منتجات |
| فهم التباين | أداء فرق عمل |
| تقارير إحصائية | تحليل استبيانات |

---

### ✅ ملخص الدرس 8

في هذا الدرس، تعلمنا:

- ما هو الرسم الصندوقي ولماذا نستخدمه.
- كيف يُظهر التوزيع الإحصائي للبيانات.
- كيفية رسم صندوق واحد أو أكثر.
- تخصيص الألوان، الحدود، والوسيط.
- استخدام النمط الكائني للتحكم الدقيق.
- دمج الرسم مع تشتت لإظهار الكثافة.
- الحالات التي لا يُنصح باستخدامه فيها.
- الأخطاء الشائعة وكيفية حلها.
- فهم IQR والقيم الشاذة.
- تخصيص الشبكة والمحاور.

---

### ✅ تمارين تطبيقية

1. **التمرين 1**: أنشئ رسمًا صندوقيًا لدرجات 20 طالبًا في مادة العلوم.
2. **التمرين 2**: أضف قيمًا شاذة وتحقق من ظهورها.
3. **التمرين 3**: قارن بين توزيع درجات صف أ وصف ب.
4. **التمرين 4**: غيّر لون الصناديق إلى ألوان مخصصة.
5. **التمرين 5**: جرّب استخدام الرسم الأفقي.

---

### ❓ أسئلة مراجعة

1. ما وظيفة `plt.boxplot()`؟
2. ما معنى IQR؟
3. كيف تُحسب القيم الشاذة؟
4. ما الفرق بين `vert=True` و `vert=False`؟
5. لماذا نستخدم `patch_artist=True`؟
6. ما الفائدة من `medianprops`؟
7. كيف تُخصص لون الصندوق؟
8. متى لا نستخدم الرسم الصندوقي؟
9. ما معنى "الشعرية" في الرسم؟
10. كيف تُظهر الشبكة على المحور الصادي فقط؟

---

### 🔁 مراجعة سريعة (ملخص الدرس)

- الرسم الصندوقي يُظهر التوزيع الإحصائي.
- يُظهر الوسيط، الربعات، والقيم الشاذة.
- `plt.boxplot(data)` يُنشئ الرسم.
- `labels` يُعين تسميات.
- `patch_artist=True` يُفعّل التلوين.
- `vert=False` يجعله أفقيًا.
- النمط الكائني يعطي تحكمًا دقيقًا.
- مثالي للمقارنة بين المجموعات.
- لا يُستخدم مع عدد قليل من البيانات.
- تجنب الأخطاء الشائعة مثل البيانات النصية.

